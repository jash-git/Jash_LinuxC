<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- 这篇文章由Dancingwind翻译，作者的联系方式zhouwei02@mails.tsinghua.edu.cn -->
<HTML><HEAD><TITLE>NeHe OpenGL教程第四十六课，DancingWind翻译</TITLE>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<style type=text/css>
A:active {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff; TEXT-DECORATION: none
}
A:link {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff; TEXT-DECORATION: none
}
A:visited {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff; TEXT-DECORATION: none
}
A:hover {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #ffda6a; TEXT-DECORATION: none
}
BODY {
	COLOR: #ffffff; BACKGROUND-COLOR: #000000
}
TD IMG {
	DISPLAY: block
}
.back {
	BACKGROUND: #000022; COLOR: #ffffff
}
.back2 {
	BACKGROUND: #000000; COLOR: #ffffff
}
.back3 {
	BACKGROUND: #000022; COLOR: #ffffff
}
.copy {
	FONT-SIZE: 11px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Tahoma, Verdana, sans-serif; FONT-VARIANT: normal; TEXT-DECORATION: none
}
.head {
	FONT: bold 13px Tahoma, Verdana, sans-serif; TEXT-DECORATION: none
}
.link {
	FONT-SIZE: 14px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Tahoma, Verdana, sans-serif; FONT-VARIANT: normal; TEXT-DECORATION: none
}
.menu {
	FONT: bold 17px Tahoma, Verdana, sans-serif; TEXT-DECORATION: none
}
.news {
	BACKGROUND: #00008b; COLOR: #ffffff
}
.tab {
	PADDING-LEFT: 35px
}
.text {
	FONT-SIZE: 12px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Tahoma, Verdana, sans-serif; FONT-VARIANT: normal; TEXT-DECORATION: none
}
.theme {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff
}
.dotted {
	BORDER-RIGHT: #00008b 2px dotted; BORDER-TOP: #00008b 2px dotted; BORDER-LEFT: #00008b 2px dotted; BORDER-BOTTOM: #00008b 2px dotted
}
.solid {
	BORDER-RIGHT: #ffffff 1px solid; BORDER-TOP: #ffffff 1px solid; BORDER-LEFT: #ffffff 1px solid; BORDER-BOTTOM: #ffffff 1px solid
}
.logo {
	BACKGROUND-IMAGE: url("logo.jpg")
}
.menubar {
	BACKGROUND-IMAGE: url(../graphics/rgb/menubar.jpg)
}
.menubg {
	BACKGROUND-IMAGE: url("menubg.jpg")
}
.menuheading {
	BACKGROUND-IMAGE: url(../graphics/rgb/menuheading.jpg)
}
.nehebutton {
	BACKGROUND-IMAGE: url("nehebutton.jpg")
}
.newslogo {
	BACKGROUND-IMAGE: url(../graphics/rgb/newslogo.jpg)
}
.tinylogo {
	BACKGROUND-IMAGE: url("tinylogo.jpg")
}
.bc {
	BACKGROUND-IMAGE:  url(../Pic/bc.png)
}
.bl {
	BACKGROUND-IMAGE:  url("bl.png")
}
.br {
	BACKGROUND-IMAGE:  url(../Pic/br.png)
}
.c {
	BACKGROUND-IMAGE: url("Picc.png")
}
.l {
	BACKGROUND-IMAGE:  url(../Pic/l.png)
}
.lc {
	BACKGROUND-IMAGE: url("Piclc.png")
}
.r {
	BACKGROUND-IMAGE:  url(../Pic/r.png)
}
.rc {
	BACKGROUND-IMAGE: url("Picrc.png")
}
.tc {
	BACKGROUND-IMAGE:  url(../Pic/tc.png)
}
.tl {
	BACKGROUND-IMAGE:  url("tl.png")
}
.tr {
	BACKGROUND-IMAGE:  url(../Pic/tr.png)
}

</style>
</head>
<BODY text=white vLink=#aaccff link=#aaccff bgColor=black>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tinylogo width=326 height=130><IMG height=130 
      alt="NeHe Productions" 
      src="logo.png" tppabs="http://www.owlei.com/DancingWind/Pic/logo.png" width=326></TD>
      <TD vAlign=center align=middle><div align="center"><FONT class=text><FONT class=theme 
      size=+3><B><I>第46课</I></B></FONT></FONT></div></TD>
  </TR></TBODY></TABLE>
  <!-- 上边框-->
<table border="0" cellPadding="0" cellSpacing="0" width="100%">
<TBODY>
  <tr>
    <td><img height="28" src="tl.jpg" tppabs="http://www.owlei.com/DancingWind/Pic/tl.jpg" width="28"></td>
    <td width="100%"><img height="28" src="tc.gif" tppabs="http://www.owlei.com/DancingWind/Pic/tc.gif" width="100%"></td>
    <td><img height="28" src="tr.gif" tppabs="http://www.owlei.com/DancingWind/Pic/tr.gif" width="28"></td>
  </tr>
</TBODY>
</table>

<!-- 中部-->
<table border="0" cellPadding="0" cellSpacing="0" width="100%">
<TBODY>
  <tr>
  	<!-- 中部左边框-->
    <td  background="l.gif" tppabs="http://www.owlei.com/DancingWind/Pic/l.gif"><img src="l.gif" tppabs="http://www.owlei.com/DancingWind/Pic/l.gif" width="28" height="28"></td>
	<!-- 中部文字部分-->
    <td vAlign="top" width="100%">
	<table width="100%" border="0">
          <tr>
            <td width="30%"><img src="lesson46.jpg" tppabs="http://www.owlei.com/DancingWind/Pic/lesson46.jpg" width="240" height="180"></td>
            <td width="70%"><p><font ><b>全屏反走样</b></font></p>
              <p><font size="3">当今显卡的强大功能，你几乎什么都不用做，只需要在创建窗口的时候该一个数据。看看吧，驱动程序为你做完了一切。</font></p></td>
          </tr>
     </table>
      </td>
	<!-- 中部右边框-->
    <td background="r.gif" tppabs="http://www.owlei.com/DancingWind/Pic/r.gif"><img src="r.gif" tppabs="http://www.owlei.com/DancingWind/Pic/r.gif" width="28" height="28"></td>
  </tr>
</TBODY>
</table>

<!-- 下边框-->
<table border="0" cellPadding="0" cellSpacing="0" width="100%">
<TBODY>
  <tr>
    <td><img height="28" src="bl.gif" tppabs="http://www.owlei.com/DancingWind/Pic/bl.gif" width="28"></td>
    <td width="100%"><img height="28" src="bc.gif" tppabs="http://www.owlei.com/DancingWind/Pic/bc.gif" width="100%"></td>
    <td><img height="28" src="br.gif" tppabs="http://www.owlei.com/DancingWind/Pic/br.gif" width="28"></td>
  </tr>
</TBODY>
</table>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">在图形的绘制中，直线的走样是非常影响美观的，我们可以使用反走样解决这个问题。在众多的解决方案里，多重采样是一种易于硬件实现的方法，也是一种快速的方法。<br>
        全凭多重采样可以使你的图形看起来更美观，我们可以使用ARB_MULTISAMPLE扩展完成这个功能，但它会降低你的程序的速度。
<p>&nbsp;</p>
      <p>&nbsp;</p>
    </TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>Vid_mem = sizeof(Front_buffer) + sizeof(Back_buffer) + num_samples<br>		* (sizeof(Front_buffer) +sizeof(ZS_buffer))<br></PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">如果你想知道更多的关于多重采样的信息，请访问下面的链接：
<p><a href="javascript:if(confirm('http://developer.nvidia.com/attach/3464  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://developer.nvidia.com/attach/3464'" tppabs="http://developer.nvidia.com/attach/3464">GDC2002 -- OpenGL Multisample</a><br>
        <a href="javascript:if(confirm('http://developer.nvidia.com/attach/2064  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://developer.nvidia.com/attach/2064'" tppabs="http://developer.nvidia.com/attach/2064">OpenGL Pixel Formats 
        and Multisample Antialiasing</a> </p>
        <p>下面我们来介绍如何使用多重采样，不向其他的扩展，我们在使用多重采样时，必须在窗口创建时告诉它使用多重采样，典型的步骤如下：<br>
          1、创建一个窗口<br>
          2、查询是否支持多重采样<br>
          3、如果支持删除当前的窗口，使用支持多重采样的格式创建窗口<br>
          4、如果我们想使用多重采样，仅仅启用它既可。</p>
        <p>了解了上面，我们从头说明如何使用多重采样，并介绍ARB_Multisample的实现方法：</p>
        </TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>#include &lt;windows.h&gt;<br>#include &lt;gl.h&gt;<br>#include &lt;glu.h&gt;<br>#include &quot;arb_multisample.h&quot;</PRE>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">下面两行定义我需要使用的像素格式</TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 声明我们将要使用</span><br>#define WGL_SAMPLE_BUFFERS_ARB	0x2041<br>#define WGL_SAMPLES_ARB		0x2042</PRE>
<p>bool arbMultisampleSupported = false;<br>
  int arbMultisampleFormat = 0;</p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">下面这个函数在扩展名的字符串中查找，如果包含则返回true
<p>&nbsp;</p>
    </TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 判断是否支持这个扩展</span><br>bool WGLisExtensionSupported(const char *extension)<br>{<br>	const size_t extlen = strlen(extension);<br>	const char *supported = NULL;</PRE>
<p> <span class="theme">// 返回在WGL的扩展中查找是否支持特定的扩展</span><br>
  PROC wglGetExtString = wglGetProcAddress(&quot;wglGetExtensionsStringARB&quot;);</p>
<p> if (wglGetExtString)<br>
  supported = ((char*(__stdcall*)(HDC))wglGetExtString)(wglGetCurrentDC());</p>
<p> <span class="theme">//在OpenGL的扩展中查找是否支持特定的扩展</span><br>
  if (supported == NULL)<br>
  supported = (char*)glGetString(GL_EXTENSIONS);</p>
<p> <span class="theme">// 如果都不支持，则返回失败</span><br>
  if (supported == NULL)<br>
  return false;</p>
<p> <span class="theme">// 查找是否包含需要的扩展名</span><br>
  for (const char* p = supported; ; p++)<br>
  {<br>
  p = strstr(p, extension);</p>
<p> if (p == NULL)<br>
  return false; </p>
<p> if ((p==supported || p[-1]==' ') &amp;&amp; (p[extlen]=='\0' || p[extlen]==' 
  '))<br>
  return true; <br>
  }<br>
  }<br>
</p>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">下面这个函数在扩展名的字符串中查找，如果包含则返回true</TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 初始化多重渲染</span><br>bool InitMultisample(HINSTANCE hInstance,HWND hWnd,PIXELFORMATDESCRIPTOR pfd)<br>{  <br><span class="theme">	 // 检测是否支持多重渲染</span><br>	if (!WGLisExtensionSupported(&quot;WGL_ARB_multisample&quot;))<br>	{<br>		arbMultisampleSupported=false;<br>		return false;<br>	}</PRE>
<p> <span class="theme">// 返回wglChoosePixelFormatARB函数的入口</span><br>
  PFNWGLCHOOSEPIXELFORMATARBPROC wglChoosePixelFormatARB = (PFNWGLCHOOSEPIXELFORMATARBPROC)wglGetProcAddress(&quot;wglChoosePixelFormatARB&quot;);	
  <br>
  if (!wglChoosePixelFormatARB) <br>
  {<br>
  arbMultisampleSupported=false;<br>
  return false;<br>
  }</p>
<p> HDC hDC = GetDC(hWnd);</p>
<p> int pixelFormat;<br>
  int valid;<br>
  UINT numFormats;<br>
  float fAttributes[] = {0,0};</p>
<p> <span class="theme">//下面的代码设置多重采样的像素格式</span><br>
  int iAttributes[] =<br>
  {<br>
  WGL_DRAW_TO_WINDOW_ARB,GL_TRUE,<br>
  WGL_SUPPORT_OPENGL_ARB,GL_TRUE,<br>
  WGL_ACCELERATION_ARB,WGL_FULL_ACCELERATION_ARB,<br>
  WGL_COLOR_BITS_ARB,24,<br>
  WGL_ALPHA_BITS_ARB,8,<br>
  WGL_DEPTH_BITS_ARB,16,<br>
  WGL_STENCIL_BITS_ARB,0,<br>
  WGL_DOUBLE_BUFFER_ARB,GL_TRUE,<br>
  WGL_SAMPLE_BUFFERS_ARB,GL_TRUE,<br>
  WGL_SAMPLES_ARB,4,<br>
  0,0<br>
  };</p>
<p> <span class="theme">// 首先我们测试是否支持4个采样点的多重采样</span><br>
  valid = wglChoosePixelFormatARB(hDC,iAttributes,fAttributes,1,&amp;pixelFormat,&amp;numFormats);<br>
  // 如果返回true并且numformats大于1，则表示成功，那么起用多重采样<br>
  if (valid &amp;&amp; numFormats &gt;= 1)<br>
  {<br>
  arbMultisampleSupported = true;<br>
  arbMultisampleFormat = pixelFormat; <br>
  return arbMultisampleSupported;<br>
  }</p>
<p> <span class="theme">// 接着我们测试是否支持2个采样点的多重采样</span><br>
  iAttributes[19] = 2;<br>
  <span class="theme">// 如果返回true并且numformats大于1，则表示成功，那么起用多重采样</span><br>
  valid = wglChoosePixelFormatARB(hDC,iAttributes,fAttributes,1,&amp;pixelFormat,&amp;numFormats);<br>
  if (valid &amp;&amp; numFormats &gt;= 1)<br>
  {<br>
  arbMultisampleSupported = true;<br>
  arbMultisampleFormat = pixelFormat; <br>
  return arbMultisampleSupported;<br>
  }<br>
  <br>
  // 返回支持多重采样<br>
  return arbMultisampleSupported;<br>
  }<br>
</p>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">下面到了我们的主程序部分了，和前面一样还是按照常规包含一些头文件</TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>#include &lt;windows.h&gt;								<br>#include &lt;gl/gl.h&gt;								<br>#include &lt;gl/glu.h&gt;							<br>#include &quot;NeHeGL.h&quot;	<br>
  #include &quot;ARB_MULTISAMPLE.h&quot;</PRE>
<p>BOOL DestroyWindowGL (GL_Window* window);<br>
  BOOL CreateWindowGL (GL_Window* window);</p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">下面我们需要在CreateWindowGL函数中添加下面的代码，首先我们先创建一个不需要支持多重采样的窗口，它在不启用多重采样的情况下起作用。</TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">	//如果不启用多重采样</span><br>	if(!arbMultisampleSupported)<br>	{<br>		PixelFormat = ChoosePixelFormat (window-&gt;hDC, &amp;pfd);				<span class="theme">// 选择一种相容的像素格式</span><br>		if (PixelFormat == 0)												<span class="theme">// 是否获得相容的像素格式</span><br>		{																	   												   <br>			ReleaseDC (window-&gt;hWnd, window-&gt;hDC);							<span class="theme">// 释放设备描述表</span><br>			window-&gt;hDC = 0;												<span class="theme">// 设置窗口设备描述表为0</span><br>			DestroyWindow (window-&gt;hWnd);								<span class="theme">	// 删除窗口</span><br>			window-&gt;hWnd = 0;											<span class="theme">	// 设置窗口句柄为0</span><br>			return FALSE;													<span class="theme">// 返回错误</span><br>		}</PRE>
<p> }<br>
  <span class="theme">//如果起用多重采样</span><br>
  else<br>
  {<br>
  PixelFormat = arbMultisampleFormat; <span class="theme">//设置采样格式为多重采样格式</span><br>
  }</p>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">接着测试是否支持多重采样，如果支持，初始化多重采样，并重新创建窗口</TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">	//检测是否支持多重采样</span><br>	if(!arbMultisampleSupported &amp;&amp; CHECK_FOR_MULTISAMPLE)<br>	{<br><span class="theme">		//如果是，初始化多重采样</span><br>		if(InitMultisample(window-&gt;init.application-&gt;hInstance,window-&gt;hWnd,pfd))<br>		{<br><span class="theme">			//消耗当前窗口</span><br>			DestroyWindowGL (window);<br>		<span class="theme">	//创建一个支持多重采样的窗口</span><br>			return CreateWindowGL(window);<br>		}<br>	}<br>
</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">好了创建好多重采样后，只需要起用它。其他的一切绘制都和平常一样。</TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>glEnable(GL_MULTISAMPLE_ARB);</PRE>
<p class="theme">// 渲染场景</p>
<p>glDisable(GL_MULTISAMPLE_ARB);</p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%"><p>好了，那就是全部，希望你能喜欢：）</p>
<table width="100%" border="1">
  <tr>
    <td width="27%"><img src="logo 3.jpg" tppabs="http://www.owlei.com/DancingWind/images/logo%203.jpg" width="209" height="200" align="middle"></td>
    <td width="73%">版权与使用声明:<br>
      我是个对学习和生活充满激情的普通男孩,在网络上我以DancingWind为昵称，我的联系方式是zhouwei02@mails.tsinghua.edu.cn，如果你有任何问题，都可以联系我。
      <p>引子<br>
        网络是一个共享的资源，但我在自己的学习生涯中浪费大量的时间去搜索可用的资料，在现实生活中花费了大量的金钱和时间在书店中寻找资料，于是我给自己起了个昵称DancingWind，其意义是想风一样从各个知识的站点中吸取成长的养料。在飘荡了多年之后，我决定把自己收集的资料整理为一个统一的资源库。</p>
      <p>版权声明<br>
        所有DancingWind发表的内容，大多都来自共享的资源，所以我没有资格把它们据为己有，或声称自己为这些资源作出了一点贡献。故任何人都可以复制，修改，重新发表，甚至以自己的名义发表，我都不会追究，但你在做以上事情的时候必须保证内容的完整性，给后来的人一个完整的教程。最后，任何人不能以这些资料的任何部分，谋取任何形式的报酬。</p>
      <p>发展计划<br>
        在国外，很多资料都是很多人花费几年的时间慢慢积累起来的。如果任何人有兴趣与别人共享你的知识，我很欢迎你与我联系，但你必须同意我上面的声明。</p>
              <p>感谢<br>
                感谢我的母亲一直以来对我的支持和在生活上的照顾。<br>
                感谢我深爱的女友田芹，一直以来默默的在精神上和生活中对我的支持，她甚至把买衣服的钱都用来给我买书了，她真的是我见过的最好的女孩，希望我能带给她幸福。</p>
              <p>资源下载: <br>
                文档 <a href="javascript:if(confirm('http://www.owlei.com/DancingWind/Res/mht/NeHe%20OpenGL%20Chinese%20Course%2046.mht  \n\nThis file was not retrieved by Teleport Pro, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?'))window.location='http://www.owlei.com/DancingWind/Res/mht/NeHe%20OpenGL%20Chinese%20Course%2046.mht'" tppabs="http://www.owlei.com/DancingWind/Res/mht/NeHe%20OpenGL%20Chinese%20Course%2046.mht">网页格式</a> 
                <a href="javascript:if(confirm('http://www.owlei.com/DancingWind/Res/pdf/OpenGL_Nehe_Course_Tutorial_46.pdf  \n\nThis file was not retrieved by Teleport Pro, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?'))window.location='http://www.owlei.com/DancingWind/Res/pdf/OpenGL_Nehe_Course_Tutorial_46.pdf'" tppabs="http://www.owlei.com/DancingWind/Res/pdf/OpenGL_Nehe_Course_Tutorial_46.pdf">PDF格式</a><br>
                源码 <a href="javascript:if(confirm('http://www.owlei.com/DancingWind/Res/Src/46_MultiSample.rar  \n\nThis file was not retrieved by Teleport Pro, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?'))window.location='http://www.owlei.com/DancingWind/Res/Src/46_MultiSample.rar'" tppabs="http://www.owlei.com/DancingWind/Res/Src/46_MultiSample.rar">RAR格式</a></p></td>
  </tr>
</table>
        <FONT class=text>
        <TABLE width="100%" border=0>
          <TBODY>
            <TR> 
              <TD align=left width="50%"><B><FONT size=-1><A 
            href="Tutorial_45.htm" tppabs="http://www.owlei.com/DancingWind/Course/Tutorial_45.htm">&lt; 第45课</A></FONT></B></TD>
              <TD align=right width="50%"><B><FONT 
        size=-1><a href="Tutorial_47.htm" tppabs="http://www.owlei.com/DancingWind/Course/Tutorial_47.htm">第47课 &gt;&nbsp;</a></FONT></B></TD>
            </TR>
          </TBODY>
        </TABLE>
        </FONT> </TD>
    <TD class=r><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>&nbsp;</PRE>
</BODY></HTML>
