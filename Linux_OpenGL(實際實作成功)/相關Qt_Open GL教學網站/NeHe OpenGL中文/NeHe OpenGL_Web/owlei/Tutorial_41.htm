<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- 这篇文章由Dancingwind翻译，作者的联系方式zhouwei02@mails.tsinghua.edu.cn -->

<HTML><HEAD><TITLE>NeHe OpenGL教程第四十一课，DancingWind翻译</TITLE>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<style type=text/css>
A:active {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff; TEXT-DECORATION: none
}
A:link {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff; TEXT-DECORATION: none
}
A:visited {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff; TEXT-DECORATION: none
}
A:hover {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #ffda6a; TEXT-DECORATION: none
}
BODY {
	COLOR: #ffffff; BACKGROUND-COLOR: #000000
}
TD IMG {
	DISPLAY: block
}
.back {
	BACKGROUND: #000022; COLOR: #ffffff
}
.back2 {
	BACKGROUND: #000000; COLOR: #ffffff
}
.back3 {
	BACKGROUND: #000022; COLOR: #ffffff
}
.copy {
	FONT-SIZE: 11px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Tahoma, Verdana, sans-serif; FONT-VARIANT: normal; TEXT-DECORATION: none
}
.head {
	FONT: bold 13px Tahoma, Verdana, sans-serif; TEXT-DECORATION: none
}
.link {
	FONT-SIZE: 14px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Tahoma, Verdana, sans-serif; FONT-VARIANT: normal; TEXT-DECORATION: none
}
.menu {
	FONT: bold 17px Tahoma, Verdana, sans-serif; TEXT-DECORATION: none
}
.news {
	BACKGROUND: #00008b; COLOR: #ffffff
}
.tab {
	PADDING-LEFT: 35px
}
.text {
	FONT-SIZE: 12px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Tahoma, Verdana, sans-serif; FONT-VARIANT: normal; TEXT-DECORATION: none
}
.theme {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff
}
.dotted {
	BORDER-RIGHT: #00008b 2px dotted; BORDER-TOP: #00008b 2px dotted; BORDER-LEFT: #00008b 2px dotted; BORDER-BOTTOM: #00008b 2px dotted
}
.solid {
	BORDER-RIGHT: #ffffff 1px solid; BORDER-TOP: #ffffff 1px solid; BORDER-LEFT: #ffffff 1px solid; BORDER-BOTTOM: #ffffff 1px solid
}
.logo {
	BACKGROUND-IMAGE: url("logo.jpg")
}
.menubar {
	BACKGROUND-IMAGE: url(../graphics/rgb/menubar.jpg)
}
.menubg {
	BACKGROUND-IMAGE: url("menubg.jpg")
}
.menuheading {
	BACKGROUND-IMAGE: url(../graphics/rgb/menuheading.jpg)
}
.nehebutton {
	BACKGROUND-IMAGE: url("nehebutton.jpg")
}
.newslogo {
	BACKGROUND-IMAGE: url(../graphics/rgb/newslogo.jpg)
}
.tinylogo {
	BACKGROUND-IMAGE: url("tinylogo.jpg")
}
.bc {
	BACKGROUND-IMAGE:  url(../Pic/bc.png)
}
.bl {
	BACKGROUND-IMAGE:  url("bl.png")
}
.br {
	BACKGROUND-IMAGE:  url(../Pic/br.png)
}
.c {
	BACKGROUND-IMAGE: url("Picc.png")
}
.l {
	BACKGROUND-IMAGE:  url(../Pic/l.png)
}
.lc {
	BACKGROUND-IMAGE: url("Piclc.png")
}
.r {
	BACKGROUND-IMAGE:  url(../Pic/r.png)
}
.rc {
	BACKGROUND-IMAGE: url("Picrc.png")
}
.tc {
	BACKGROUND-IMAGE:  url(../Pic/tc.png)
}
.tl {
	BACKGROUND-IMAGE:  url("tl.png")
}
.tr {
	BACKGROUND-IMAGE:  url(../Pic/tr.png)
}

</style>
</head>
<BODY text=white vLink=#aaccff link=#aaccff bgColor=black>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tinylogo width=326 height=130>
    <IMG height=130
      alt="NeHe Productions" src="logo.png" tppabs="http://www.owlei.com/DancingWind/Pic/logo.png"
      width=326></TD>
      <TD vAlign=center align=middle><div align="center"><FONT class=text><FONT class=theme
      size=+3><B><I>第41课</I></B></FONT></FONT></div></TD>
    </TR></TBODY></TABLE>
<!-- 上边框-->
<table border="0" cellPadding="0" cellSpacing="0" width="100%">
<TBODY>
  <tr>
    <td><img height="28" src="tl.jpg" tppabs="http://www.owlei.com/DancingWind/Pic/tl.jpg" width="28"></td>
    <td width="100%"><img height="28" src="tc.gif" tppabs="http://www.owlei.com/DancingWind/Pic/tc.gif" width="100%"></td>
    <td><img height="28" src="tr.gif" tppabs="http://www.owlei.com/DancingWind/Pic/tr.gif" width="28"></td>
  </tr>
</TBODY>
</table>

<!-- 中部-->
<table border="0" cellPadding="0" cellSpacing="0" width="100%">
<TBODY>
  <tr>
  	<!-- 中部左边框-->
    <td  background="l.gif" tppabs="http://www.owlei.com/DancingWind/Pic/l.gif"><img src="l.gif" tppabs="http://www.owlei.com/DancingWind/Pic/l.gif" width="28" height="28"></td>
	<!-- 中部文字部分-->
    <td vAlign="top" width="100%">
	<table width="100%" border="0">
          <tr>
            <td width="31%"><img src="lesson41.jpg" tppabs="http://www.owlei.com/DancingWind/Pic/lesson41.jpg" width="240" height="180"></td>
            <td width="69%"><p><FONT >体积雾气</FONT></p>
              <p><font size="3">把雾坐标绑定到顶点，你可以在雾中漫游，体验一下吧。</FONT></p></td>
          </tr>
     </table>
      </td>
	<!-- 中部右边框-->
    <td background="r.gif" tppabs="http://www.owlei.com/DancingWind/Pic/r.gif"><img src="r.gif" tppabs="http://www.owlei.com/DancingWind/Pic/r.gif" width="28" height="28"></td>
  </tr>
</TBODY>
</table>

<!-- 下边框-->
<table border="0" cellPadding="0" cellSpacing="0" width="100%">
<TBODY>
  <tr>
    <td><img height="28" src="bl.gif" tppabs="http://www.owlei.com/DancingWind/Pic/bl.gif" width="28"></td>
    <td width="100%"><img height="28" src="bc.gif" tppabs="http://www.owlei.com/DancingWind/Pic/bc.gif" width="100%"></td>
    <td><img height="28" src="br.gif" tppabs="http://www.owlei.com/DancingWind/Pic/br.gif" width="28"></td>
  </tr>
</TBODY>
</table>	
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="tl.png" tppabs="http://www.owlei.com/DancingWind/Pic/tl.png" width=28></TD>
    <TD class=tc width="100%" background="tc.gif" tppabs="http://www.owlei.com/DancingWind/Pic/tc.gif">
    <p align="center"><IMG height=28 alt=""
      src="tc.png" tppabs="http://www.owlei.com/DancingWind/Pic/tc.png" width="28"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="tr.png" tppabs="http://www.owlei.com/DancingWind/Pic/tr.png"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l background="l.png" tppabs="http://www.owlei.com/DancingWind/Pic/l.png"><IMG alt=""
      src="l.gif" tppabs="http://www.owlei.com/DancingWind/Pic/l.gif" width="28" height="28"></TD>
      <TD class=back vAlign=top width="100%">这一课我们将介绍体积雾，为了运行这个程序，你的显卡必须支持扩展&quot;GL_EXT_fot_coord&quot;。</TD>
    <TD class=r background="r.png" tppabs="http://www.owlei.com/DancingWind/Pic/r.png">
    <IMG height=28 alt=""
      src="r.png" tppabs="http://www.owlei.com/DancingWind/Pic/r.png"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="bl.png" tppabs="http://www.owlei.com/DancingWind/Pic/bl.png" width=28></TD>
    <TD class=bc width="100%" background="bc.png" tppabs="http://www.owlei.com/DancingWind/Pic/bc.png">
    <p align="center"><IMG height=28 alt=""
      src="bc.png" tppabs="http://www.owlei.com/DancingWind/Pic/bc.png" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="br.png" tppabs="http://www.owlei.com/DancingWind/Pic/br.png"
width=28></TD></TR></TBODY></TABLE>
<PRE>#include &lt;windows.h&gt;								
#include &lt;gl\gl.h&gt;							
#include &lt;gl\glu.h&gt;								
#include &lt;math.h&gt;								

#include "NeHeGL.h"							

#pragma comment( lib, "opengl32.lib" )						
#pragma comment( lib, "glu32.lib" )					

GL_Window*	g_window;						
Keys*		g_keys;								</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="tl.png" tppabs="http://www.owlei.com/DancingWind/Pic/tl.png" width=28></TD>
    <TD class=tc width="100%" background="tc.png" tppabs="http://www.owlei.com/DancingWind/Pic/tc.png">
    <p align="center"><IMG height=28 alt=""
      src="tc.png" tppabs="http://www.owlei.com/DancingWind/Pic/tc.png" width="28"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="tr.png" tppabs="http://www.owlei.com/DancingWind/Pic/tr.png"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l background="l.png" tppabs="http://www.owlei.com/DancingWind/Pic/l.png">
    <IMG height=28 alt=""
      src="l.png" tppabs="http://www.owlei.com/DancingWind/Pic/l.png" width=28></TD>
      <TD class=back vAlign=top width="100%">下面的代码设置雾的颜色和摄像机在Z方向的深度</TD>
    <TD class=r background="r.png" tppabs="http://www.owlei.com/DancingWind/Pic/r.png">
    <IMG height=28 alt=""
      src="r.png" tppabs="http://www.owlei.com/DancingWind/Pic/r.png"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="bl.png" tppabs="http://www.owlei.com/DancingWind/Pic/bl.png" width=28></TD>
    <TD class=bc width="100%" background="bc.png" tppabs="http://www.owlei.com/DancingWind/Pic/bc.png">
    <p align="center"><IMG height=28 alt=""
      src="bc.png" tppabs="http://www.owlei.com/DancingWind/Pic/bc.png" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="br.png" tppabs="http://www.owlei.com/DancingWind/Pic/br.png"
width=28></TD></TR></TBODY></TABLE>
<PRE>
GLfloat	fogColor[4] = {0.6f, 0.3f, 0.0f, 1.0f};					<FONT class=theme>// 雾的颜色 </FONT>
GLfloat camz;									<FONT class=theme>// 摄像机在Z方向的深度</FONT>
</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width="100%"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back vAlign=top width="100%">下面变量GL_FOG_COORDINATE_SOURCE_EXT和GL_FOG_COORDINATE_EXT具有初值，他们在glext.h文件中被定义，这里我们必须感谢Lev 
        Povalahev，它创建了这个文件。如果你想编译你的代码，你必须设置这个值。
        <p>为了使用glFogCoordfExt，我们需要定义这个函数的指针，并在程序运行时把它指向显卡中的函数。</p></TD>
    <TD class=r><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<PRE><FONT class=theme>// 使用FogCoordfEXT它需要的变量</FONT>
#define GL_FOG_COORDINATE_SOURCE_EXT	0x8450					<FONT class=theme>// 从GLEXT.H得到的值</FONT>
#define GL_FOG_COORDINATE_EXT		0x8451					

typedef void (APIENTRY * PFNGLFOGCOORDFEXTPROC) (GLfloat coord);		<FONT class=theme>// 声明雾坐标函数的原形</FONT>

PFNGLFOGCOORDFEXTPROC glFogCoordfEXT = NULL;					<FONT class=theme>// 设置雾坐标函数指针为NULL</FONT>

GLuint	texture[1];							<FONT class=theme>// 纹理</FONT>
</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width="100%"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back vAlign=top width="100%">Nehe的原文介绍了Ipicture的接口，它不是我们这一课的重点，故我还是使用以前的方法加载纹理。</TD>
    <TD class=r><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width="100%"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back vAlign=top width="100%">下面的代码用来检测用户的显卡是否支持EXT_fog_coord扩展，这段代码只有在你获得OpenGL渲染描述表后才能调用，否则你将获得一个错误。<br>
        首先，我们创建一个字符串，来描述我们需要的扩展。接着我们分配一块内存，用来保存显卡支持的扩展，它可以通过glGetString函数获得。接着我们检测是否含有需要的扩展，如果不存在，则返回false，如存在我们把函数的指针指向这个扩展。</TD>
    <TD class=r><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<PRE>int Extension_Init()
{
	char Extension_Name[] = "EXT_fog_coord";

	<FONT class=theme>// 返回扩展字符串</FONT>
	char* glextstring=(char *)malloc(strlen((char *)glGetString(GL_EXTENSIONS))+1);
	strcpy (glextstring,(char *)glGetString(GL_EXTENSIONS));		

	if (!strstr(glextstring,Extension_Name))				<FONT class=theme>// 查找是否有我们想要的扩展</FONT>
		return FALSE;							

	free(glextstring);							<FONT class=theme>// 释放分配的内存</FONT>
</PRE>
<PRE>	<FONT class=theme>// 获得函数的指针</FONT>
	glFogCoordfEXT = (PFNGLFOGCOORDFEXTPROC) wglGetProcAddress("glFogCoordfEXT");

	return TRUE;
}
</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width="100%"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back vAlign=top width="100%">下面的代码初始化OpenGL，并设置雾气的参数。</TD>
    <TD class=r><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<PRE>BOOL Initialize (GL_Window* window, Keys* keys)					<FONT class=theme>//初始化</FONT>
{
	g_window	= window;						
	g_keys		= keys;							

	<FONT class=theme>// 初始化扩展</FONT>
	if (!Extension_Init())							
		return FALSE;							

	if (!BuildTexture("data/wall.bmp", texture[0]))				<FONT class=theme>// 创建纹理</FONT>
		return FALSE;							

	glEnable(GL_TEXTURE_2D);						
	glClearColor (0.0f, 0.0f, 0.0f, 0.5f);					
	glClearDepth (1.0f);							
	glDepthFunc (GL_LEQUAL);						
	glEnable (GL_DEPTH_TEST);						
	glShadeModel (GL_SMOOTH);						
	glHint (GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);			</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width="100%"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back vAlign=top width="100%">下面的代码设置雾气的属性<BR>
        最后一个设置为雾气基于顶点的坐标，这运行我们把雾气放置在场景中的任意地方。<BR>
        </TD>
    <TD class=r><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<PRE>
	glEnable(GL_FOG);							
	glFogi(GL_FOG_MODE, GL_LINEAR);						
	glFogfv(GL_FOG_COLOR, fogColor);					
	glFogf(GL_FOG_START,  1.0f);						
	glFogf(GL_FOG_END,    0.0f);						
	glHint(GL_FOG_HINT, GL_NICEST);						
	glFogi(GL_FOG_COORDINATE_SOURCE_EXT, GL_FOG_COORDINATE_EXT);		<FONT class=theme>//设置雾气是基于顶点的坐标的</FONT>

	camz =	-19.0f;								

	return TRUE;							
}</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width="100%"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back vAlign=top width="100%">下面的代码绘制具体的场景</TD>
    <TD class=r><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<PRE>void Draw (void)
{
	glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);			
	glLoadIdentity ();							

	glTranslatef(0.0f, 0.0f, camz);						
</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width="100%"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back vAlign=top width="100%">下面的代码绘制四边形组成的墙，并设置每个顶点的纹理坐标和雾坐标</TD>
    <TD class=r><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<PRE>	glBegin(GL_QUADS);							<FONT class=theme>//后墙</FONT>
	 	glFogCoordfEXT(0.0f); glTexCoord2f(0.0f, 0.0f); glVertex3f(-2.5f,-2.5f,-15.0f);
		glFogCoordfEXT(0.0f); glTexCoord2f(1.0f, 0.0f); glVertex3f( 2.5f,-2.5f,-15.0f);
		glFogCoordfEXT(0.0f); glTexCoord2f(1.0f, 1.0f); glVertex3f( 2.5f, 2.5f,-15.0f);
		glFogCoordfEXT(0.0f); glTexCoord2f(0.0f, 1.0f); glVertex3f(-2.5f, 2.5f,-15.0f);
	glEnd();
</PRE>
<PRE>	glBegin(GL_QUADS);							<FONT class=theme>// 地面</FONT>
	 	glFogCoordfEXT(0.0f); glTexCoord2f(0.0f, 0.0f); glVertex3f(-2.5f,-2.5f,-15.0f);
		glFogCoordfEXT(0.0f); glTexCoord2f(1.0f, 0.0f); glVertex3f( 2.5f,-2.5f,-15.0f);
		glFogCoordfEXT(1.0f); glTexCoord2f(1.0f, 1.0f); glVertex3f( 2.5f,-2.5f, 15.0f);
		glFogCoordfEXT(1.0f); glTexCoord2f(0.0f, 1.0f); glVertex3f(-2.5f,-2.5f, 15.0f);
	glEnd();
</PRE>
<PRE>	glBegin(GL_QUADS);							<FONT class=theme>// 天花板</FONT>
		glFogCoordfEXT(0.0f); glTexCoord2f(0.0f, 0.0f); glVertex3f(-2.5f, 2.5f,-15.0f);
		glFogCoordfEXT(0.0f); glTexCoord2f(1.0f, 0.0f); glVertex3f( 2.5f, 2.5f,-15.0f);
		glFogCoordfEXT(1.0f); glTexCoord2f(1.0f, 1.0f); glVertex3f( 2.5f, 2.5f, 15.0f);
		glFogCoordfEXT(1.0f); glTexCoord2f(0.0f, 1.0f); glVertex3f(-2.5f, 2.5f, 15.0f);
	glEnd();
</PRE>
<PRE>	glBegin(GL_QUADS);							<FONT class=theme>// 右墙</FONT>
		glFogCoordfEXT(1.0f); glTexCoord2f(0.0f, 0.0f); glVertex3f( 2.5f,-2.5f, 15.0f);
		glFogCoordfEXT(1.0f); glTexCoord2f(0.0f, 1.0f); glVertex3f( 2.5f, 2.5f, 15.0f);
		glFogCoordfEXT(0.0f); glTexCoord2f(1.0f, 1.0f); glVertex3f( 2.5f, 2.5f,-15.0f);
		glFogCoordfEXT(0.0f); glTexCoord2f(1.0f, 0.0f); glVertex3f( 2.5f,-2.5f,-15.0f);
	glEnd();
</PRE>
<PRE>	glBegin(GL_QUADS);							<FONT class=theme>// 左墙</FONT>
	 	glFogCoordfEXT(1.0f); glTexCoord2f(0.0f, 0.0f); glVertex3f(-2.5f,-2.5f, 15.0f);
		glFogCoordfEXT(1.0f); glTexCoord2f(0.0f, 1.0f); glVertex3f(-2.5f, 2.5f, 15.0f);
		glFogCoordfEXT(0.0f); glTexCoord2f(1.0f, 1.0f); glVertex3f(-2.5f, 2.5f,-15.0f);
		glFogCoordfEXT(0.0f); glTexCoord2f(1.0f, 0.0f); glVertex3f(-2.5f,-2.5f,-15.0f);
	glEnd();

	glFlush ();	                                                                                               
}
</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width="100%"></TD>
    <TD class=tr><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
      <TD class=back vAlign=top width="100%"><p>希望你喜欢这一课，如果你愿意的话创建更漂亮的体积雾吧。 </p>
<table width="100%" border="1">
  <tr>
    <td width="27%"><img src="logo 3.jpg" tppabs="http://www.owlei.com/DancingWind/images/logo%203.jpg" width="209" height="200" align="middle"></td>
    <td width="73%">版权与使用声明:<br>
      我是个对学习和生活充满激情的普通男孩,在网络上我以DancingWind为昵称，我的联系方式是zhouwei02@mails.tsinghua.edu.cn，如果你有任何问题，都可以联系我。
      <p>引子<br>
        网络是一个共享的资源，但我在自己的学习生涯中浪费大量的时间去搜索可用的资料，在现实生活中花费了大量的金钱和时间在书店中寻找资料，于是我给自己起了个昵称DancingWind，其意义是想风一样从各个知识的站点中吸取成长的养料。在飘荡了多年之后，我决定把自己收集的资料整理为一个统一的资源库。</p>
      <p>版权声明<br>
        所有DancingWind发表的内容，大多都来自共享的资源，所以我没有资格把它们据为己有，或声称自己为这些资源作出了一点贡献。故任何人都可以复制，修改，重新发表，甚至以自己的名义发表，我都不会追究，但你在做以上事情的时候必须保证内容的完整性，给后来的人一个完整的教程。最后，任何人不能以这些资料的任何部分，谋取任何形式的报酬。</p>
      <p>发展计划<br>
        在国外，很多资料都是很多人花费几年的时间慢慢积累起来的。如果任何人有兴趣与别人共享你的知识，我很欢迎你与我联系，但你必须同意我上面的声明。</p>
              <p>感谢<br>
                感谢我的母亲一直以来对我的支持和在生活上的照顾。<br>
                感谢我深爱的女友田芹，一直以来默默的在精神上和生活中对我的支持，她甚至把买衣服的钱都用来给我买书了，她真的是我见过的最好的女孩，希望我能带给她幸福。</p>
              <p>资源下载: <br>
                文档 <a href="javascript:if(confirm('http://www.owlei.com/DancingWind/Res/mht/NeHe%20OpenGL%20Chinese%20Course%2041.mht  \n\nThis file was not retrieved by Teleport Pro, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?'))window.location='http://www.owlei.com/DancingWind/Res/mht/NeHe%20OpenGL%20Chinese%20Course%2041.mht'" tppabs="http://www.owlei.com/DancingWind/Res/mht/NeHe%20OpenGL%20Chinese%20Course%2041.mht">网页格式</a> 
                <a href="javascript:if(confirm('http://www.owlei.com/DancingWind/Res/pdf/OpenGL_Nehe_Course_Tutorial_41.pdf  \n\nThis file was not retrieved by Teleport Pro, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?'))window.location='http://www.owlei.com/DancingWind/Res/pdf/OpenGL_Nehe_Course_Tutorial_41.pdf'" tppabs="http://www.owlei.com/DancingWind/Res/pdf/OpenGL_Nehe_Course_Tutorial_41.pdf">PDF格式</a><br>
                源码 <a href="javascript:if(confirm('http://www.owlei.com/DancingWind/Res/Src/41_VolumnFog.rar  \n\nThis file was not retrieved by Teleport Pro, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?'))window.location='http://www.owlei.com/DancingWind/Res/Src/41_VolumnFog.rar'" tppabs="http://www.owlei.com/DancingWind/Res/Src/41_VolumnFog.rar">RAR格式</a></p></td>
  </tr>
</table>
        <TABLE width="100%" border=0>
          <TBODY>
            <TR> 
              <TD width="50%"><B><font size="-1"><a href="Tutorial_40.htm" tppabs="http://www.owlei.com/DancingWind/Course/Tutorial_40.htm">&lt; 第40课 </a></font></B></TD>
              <TD align=right width="50%"><B><FONT size=-1><a href="Tutorial_42.htm" tppabs="http://www.owlei.com/DancingWind/Course/Tutorial_42.htm">第42课 ></a></FONT></B></TD>
            </TR>
          </TBODY>
        </TABLE>
        </TD>
    <TD class=r><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt=""
      src="blank(1).gif" tppabs="http://www.owlei.com/DancingWind/Pic/blank(1).gif"
width=28></TD></TR></TBODY></TABLE></BODY></HTML>