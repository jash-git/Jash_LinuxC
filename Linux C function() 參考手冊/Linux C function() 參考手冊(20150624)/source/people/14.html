<html>
<head>
<title>Untitled Document</title>
</head>
<body>
<table width="100%">
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc263></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      accept（接受socket連線） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> socket，bind，listen，connect<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int accept(int s,struct sockaddr 
      * addr,int * addrlen);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> accept()用來接受參數s的socket連線。參數s的socket必需先經bind()、listen()函數處理過，當有連線進來時accept()會返回一個新的socket處理代碼，往後的數據傳送與讀取就是經由新的socket處理，而原來參數s的socket能繼續使用accept()來接受新的連線要求。連線成功時，參數addr所指的結構會被系統填入遠程主機的地址數據，參數addrlen為scokaddr的結構長度。關於結構sockaddr的定義請參考bind()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回新的socket處理代碼，失敗返回-1，錯誤原因存於errno中。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s 非合法socket處理代碼。<br>
      EFAULT 參數addr指針指向無法存取的內存空間。<br>
      ENOTSOCK 參數s為一文件描述詞，非socket。<br>
      EOPNOTSUPP 指定的socket並非SOCK_STREAM。<br>
      EPERM 防火朁痤揭像s線。<br>
      ENOBUFS 系統的緩衝內存不足。<br>
      ENOMEM 核心內存不足。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考listen()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc264></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      bind（對socket定位） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> socket，accept，connect，listen<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int bind(int sockfd,struct sockaddr 
      * my_addr,int addrlen);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> bind()用來設置給參數sockfd的socket一個名稱。此名稱由參數my_addr指向一sockaddr結構，對於不同的socket 
      domain定義了一個通用的數據結構<br>
      struct sockaddr<br>
      {<br>
      unsigned short int sa_family;<br>
      char sa_data[14];<br>
      };<br>
      sa_family 為調用socket（）時的domain參數，即AF_xxxx值。<br>
      sa_data 最多使用14個字符長度。<br>
      此sockaddr結構會因使用不同的socket domain而有不同結構定義，例如使用AF_INET domain，其socketaddr結構定義便為<br>
      struct socketaddr_in<br>
      {<br>
      unsigned short int sin_family;<br>
      uint16_t sin_port;<br>
      struct in_addr sin_addr;<br>
      unsigned char sin_zero[8];<br>
      };<br>
      struct in_addr<br>
      {<br>
      uint32_t s_addr;<br>
      };<br>
      sin_family 即為sa_family<br>
      sin_port 為使用的port編號<br>
      sin_addr.s_addr 為IP 地址<br>
      sin_zero 未使用。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 參數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> addrlen為sockaddr的結構長度。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回0，失敗返回-1，錯誤原因存於errno中。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數sockfd 非合法socket處理代碼。<br>
      EACCESS 權限不足<br>
      ENOTSOCK 參數sockfd為一文件描述詞，非socket。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考listen()<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc265></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      connect（建立socket連線） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> socket，bind，listen<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int connect (int sockfd,struct 
      sockaddr * serv_addr,int addrlen);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> connect()用來將參數sockfd 的socket 連至參數serv_addr 
      指定的網絡地址。結構sockaddr請參考bind()。參數addrlen為sockaddr的結構長度。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回0，失敗返回-1，錯誤原因存於errno中。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數sockfd 非合法socket處理代碼<br>
      EFAULT 參數serv_addr指針指向無法存取的內存空間<br>
      ENOTSOCK 參數sockfd為一文件描述詞，非socket。<br>
      EISCONN 參數sockfd的socket已是連線狀態<br>
      ECONNREFUSED 連線要求被server端拒絕。<br>
      ETIMEDOUT 企圖連線的操作超過限定時間仍未有響應。<br>
      ENETUNREACH 無法傳送數據包至指定的主機。<br>
      EAFNOSUPPORT sockaddr結構的sa_family不正確。<br>
      EALREADY socket為不可阻斷且先前的連線操作還未完成。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> /* 利用socket的TCP client<br>
      此程序會連線TCP server，並將鍵盤輸入的字符串傳送給server。<br>
      TCP server範例請參考listen（）。<br>
      */<br>
      #include&lt;sys/stat.h&gt;<br>
      #include&lt;fcntl.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      #include&lt;netinet/in.h&gt;<br>
      #include&lt;arpa/inet.h&gt;<br>
      #define PORT 1234<br>
      #define SERVER_IP “127.0.0.1”<br>
      main()<br>
      {<br>
      int s;<br>
      struct sockaddr_in addr;<br>
      char buffer[256];<br>
      if((s = socket(AF_INET,SOCK_STREAM,0))&lt;0){<br>
      perror(“socket”);<br>
      exit(1);<br>
      }<br>
      /* 填寫sockaddr_in結構*/<br>
      bzero(&addr,sizeof(addr));<br>
      addr.sin_family = AF_INET;<br>
      addr.sin_port=htons(PORT);<br>
      addr.sin_addr.s_addr = inet_addr(SERVER_IP);<br>
      /* 嘗試連線*/<br>
      if(connect(s,&addr,sizeof(addr))&lt;0){<br>
      perror(“connect”);<br>
      exit(1);<br>
      }<br>
      /* 接收由server端傳來的信息*/<br>
      recv(s,buffer,sizeof(buffer),0);<br>
      printf(“%s\n”,buffer);<br>
      while(1){<br>
      bzero(buffer,sizeof(buffer));<br>
      /* 從標準輸入設備取得字符串*/<br>
      read(STDIN_FILENO,buffer,sizeof(buffer));<br>
      /* 將字符串傳給server端*/<br>
      if(send(s,buffer,sizeof(buffer),0)&lt;0){<br>
      perror(“send”);<br>
      exit(1);<br>
      }<br>
      }<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> $ ./connect<br>
      Welcome to server!<br>
      hi I am client! /*鍵盤輸入*/<br>
      /*&lt;Ctrl+C&gt;中斷程序*/<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc266></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      endprotoent（結束網絡協議數據的讀取） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> getprotoent，getprotobyname，getprotobynumber，setprotoent<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;netdb.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> void endprotoent(void);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> endprotoent()用來關閉由getprotoent()打開的文件。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考getprotoent()<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc267></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      endservent（結束網絡服務數據的讀取） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> getservent，getservbyname，getservbyport，setservent<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;netdb.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> void endservent(void);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> endservent()用來關閉由getservent()所打開的文件。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考getservent()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc268></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      getsockopt（取得socket狀態） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> setsockopt<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int getsockopt(int s,int level,int 
      optname,void* optval,socklen_t* optlen);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> getsockopt()會將參數s所指定的socket狀態返回。參數optname代表欲取得何種選項狀態，而參數optval則指向欲保存結果的內存地址，參數optlen則為該空間的大小。參數level、optname請參考setsockopt()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回0，若有錯誤則返回-1，錯誤原因存於errno<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s 並非合法的socket處理代碼<br>
      ENOTSOCK 參數s為一文件描述詞，非socket<br>
      ENOPROTOOPT 參數optname指定的選項不正確<br>
      EFAULT 參數optval指針指向無法存取的內存空間<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      main()<br>
      {<br>
      int s,optval,optlen = sizeof(int);<br>
      if((s = socket(AF_INET,SOCK_STREAM,0))&lt;0) perror(“socket”);<br>
      getsockopt(s,SOL_SOCKET,SO_TYPE,&optval,&optlen);<br>
      printf(“optval = %d\n”,optval);<br>
      close(s);}<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> optval = 1 /*SOCK_STREAM的定義正是此值*/<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc269></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      htonl（將32位主機字符順序轉換成網絡字符順序） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> htons，ntohl，ntohs<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;netinet/in.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> unsigned long int htonl(unsigned 
      long int hostlong);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> htonl（）用來將參數指定的32位hostlong 轉換成網絡字符順序。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 返回對應的網絡字符順序。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考getservbyport()或connect()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc270></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      htons（將16位主機字符順序轉換成網絡字符順序） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> htonl，ntohl，ntohs<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;netinet/in.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> unsigned short int htons(unsigned 
      short int hostshort);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> htons()用來將參數指定的16位hostshort轉換成網絡字符順序。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 返回對應的網絡字符順序。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考connect()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc271></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      inet_addr（將網絡地址轉成二進制的數字） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> inet_aton，inet_ntoa<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/socket.h&gt;<br>
      #include&lt;netinet/in.h&gt;<br>
      #include&lt;arpa/inet.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> unsigned long int inet_addr(const 
      char *cp);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> inet_addr()用來將參數cp所指的網絡地址字符串轉換成網絡所使用的二進制數字。網絡地址字符串是以數字和點組成的字符串，例如:“163.13.132.68”。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回對應的網絡二進制的數字，失敗返回-1。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc272></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      inet_aton（將網絡地址轉成網絡二進制的數字） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> inet_addr，inet_ntoa<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/scoket.h&gt;<br>
      #include&lt;netinet/in.h&gt;<br>
      #include&lt;arpa/inet.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int inet_aton(const char * cp,struct 
      in_addr *inp);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> inet_aton()用來將參數cp所指的網絡地址字符串轉換成網絡使用的二進制的數字，然後存於參數inp所指的in_addr結構中。<br>
      結構in_addr定義如下<br>
      struct in_addr<br>
      {<br>
      unsigned long int s_addr;<br>
      };<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回非0值，失敗則返回0。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc273></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      inet_ntoa（將網絡二進制的數字轉換成網絡地址） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> inet_addr，inet_aton<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/socket.h&gt;<br>
      #include&lt;netinet/in.h&gt;<br>
      #include&lt;arpa/inet.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> char * inet_ntoa(struct in_addr 
      in);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> inet_ntoa()用來將參數in所指的網絡二進制的數字轉換成網絡地址，然後將指向此網絡地址字符串的指針返回。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回字符串指針，失敗則返回NULL。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc274></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      listen（等待連接） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> socket，bind，accept，connect<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int listen(int s,int backlog);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> listen()用來等待參數s 的socket連線。參數backlog指定同時能處理的最大連接要求，如果連接數目達此上限則client端將收到ECONNREFUSED的錯誤。Listen()並未開始接收連線，只是設置socket為listen模式，真正接收client端連線的是accept()。通常listen()會在socket()，bind()之後調用，接著才調用accept()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回0，失敗返回-1，錯誤原因存於errno<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 附加說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> listen()只適用SOCK_STREAM或SOCK_SEQPACKET的socket類型。如果socket為AF_INET則參數backlog 
      最大值可設至128。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數sockfd非合法socket處理代碼<br>
      EACCESS 權限不足<br>
      EOPNOTSUPP 指定的socket並未支援listen模式。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      #include&lt;netinet/in.h&gt;<br>
      #include&lt;arpa/inet.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      #define PORT 1234<br>
      #define MAXSOCKFD 10<br>
      main()<br>
      {<br>
      int sockfd,newsockfd,is_connected[MAXSOCKFD],fd;<br>
      struct sockaddr_in addr;<br>
      int addr_len = sizeof(struct sockaddr_in);<br>
      fd_set readfds;<br>
      char buffer[256];<br>
      char msg[ ] =”Welcome to server!”;<br>
      if ((sockfd = socket(AF_INET,SOCK_STREAM,0))&lt;0){<br>
      perror(“socket”);<br>
      exit(1);<br>
      }<br>
      bzero(&addr,sizeof(addr));<br>
      addr.sin_family =AF_INET;<br>
      addr.sin_port = htons(PORT);<br>
      addr.sin_addr.s_addr = htonl(INADDR_ANY);<br>
      if(bind(sockfd,&addr,sizeof(addr))&lt;0){<br>
      perror(“connect”);<br>
      exit(1);<br>
      }<br>
      if(listen(sockfd,3)&lt;0){<br>
      perror(“listen”);<br>
      exit(1);<br>
      }<br>
      for(fd=0;fd&lt;MAXSOCKFD;fd++)<br>
      is_connected[fd]=0;<br>
      while(1){<br>
      FD_ZERO(&readfds);<br>
      FD_SET(sockfd,&readfds);<br>
      for(fd=0;fd&lt;MAXSOCKFD;fd++)<br>
      if(is_connected[fd]) FD_SET(fd,&readfds);<br>
      if(!select(MAXSOCKFD,&readfds,NULL,NULL,NULL))continue;<br>
      for(fd=0;fd&lt;MAXSOCKFD;fd++)<br>
      if(FD_ISSET(fd,&readfds)){<br>
      if(sockfd = =fd){<br>
      if((newsockfd = accept (sockfd,&addr,&addr_len))&lt;0)<br>
      perror(“accept”);<br>
      write(newsockfd,msg,sizeof(msg));<br>
      is_connected[newsockfd] =1;<br>
      printf(“cnnect from %s\n”,inet_ntoa(addr.sin_addr));<br>
      }else{<br>
      bzero(buffer,sizeof(buffer));<br>
      if(read(fd,buffer,sizeof(buffer))&lt;=0){<br>
      printf(“connect closed.\n”);<br>
      is_connected[fd]=0;<br>
      close(fd);<br>
      }else<br>
      printf(“%s”,buffer);<br>
      }<br>
      }<br>
      }<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> $ ./listen<br>
      connect from 127.0.0.1<br>
      hi I am client<br>
      connected closed.<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc275></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      ntohl（將32位網絡字符順序轉換成主機字符順序） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> htonl，htons，ntohs<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;netinet/in.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> unsigned long int ntohl(unsigned 
      long int netlong);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> ntohl()用來將參數指定的32位netlong轉換成主機字符順序。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 返回對應的主機字符順序。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考getservent()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc276></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      ntohs（將16位網絡字符順序轉換成主機字符順序） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> htonl，htons，ntohl<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;netinet/in.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> unsigned short int ntohs(unsigned 
      short int netshort);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> ntohs()用來將參數指定的16位netshort轉換成主機字符順序。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 返回對應的主機順序。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考getservent()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc277></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      recv（經socket接收數據） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> recvfrom，recvmsg，send，sendto，socket<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int recv(int s,void *buf,int len,unsigned 
      int flags);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> recv()用來接收遠端主機經指定的socket傳來的數據，並把數據存到由參數buf 
      指向的內存空間，參數len為可接收數據的最大長度。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 參數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> flags一般設0。其他數值定義如下:<br>
      MSG_OOB 接收以out-of-band 送出的數據。<br>
      MSG_PEEK 返回來的數據並不會在系統內刪除，如果再調用recv()會返回相同的數據內容。<br>
      MSG_WAITALL強迫接收到len大小的數據後才能返回，除非有錯誤或信號產生。<br>
      MSG_NOSIGNAL此操作不願被SIGPIPE信號中斷返回值成功則返回接收到的字符數，失敗返回-1，錯誤原因存於errno中。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s非合法的socket處理代碼<br>
      EFAULT 參數中有一指針指向無法存取的內存空間<br>
      ENOTSOCK 參數s為一文件描述詞，非socket。<br>
      EINTR 被信號所中斷<br>
      EAGAIN 此動作會令進程阻斷，但參數s的socket為不可阻斷<br>
      ENOBUFS 系統的緩衝內存不足。<br>
      ENOMEM 核心內存不足<br>
      EINVAL 傳給系統調用的參數不正確。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考listen()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc278></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      recvfrom（經socket接收數據） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> recv，recvmsg，send，sendto，socket<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int recvfrom(int s,void *buf,int 
      len,unsigned int flags ,struct sockaddr *from ,int *fromlen);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> recv()用來接收遠程主機經指定的socket 傳來的數據，並把數據存到由參數buf 
      指向的內存空間，參數len 為可接收數據的最大長度。參數flags 一般設0，其他數值定義請參考recv()。參數from用來指定欲傳送的網絡地址，結構sockaddr 
      請參考bind()。參數fromlen為sockaddr的結構長度。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回接收到的字符數，失敗則返回-1，錯誤原因存於errno中。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s非合法的socket處理代碼<br>
      EFAULT 參數中有一指針指向無法存取的內存空間。<br>
      ENOTSOCK 參數s為一文件描述詞，非socket。<br>
      EINTR 被信號所中斷。<br>
      EAGAIN 此動作會令進程阻斷，但參數s的socket為不可阻斷。<br>
      ENOBUFS 系統的緩衝內存不足<br>
      ENOMEM 核心內存不足<br>
      EINVAL 傳給系統調用的參數不正確。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> /*利用socket的UDP client<br>
      此程序會連線UDP server，並將鍵盤輸入的字符串傳給server。<br>
      UDP server 範例請參考sendto（）。<br>
      */<br>
      #include&lt;sys/stat.h&gt;<br>
      #include&lt;fcntl.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      #include&lt;sys/typs.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      #include&lt;netinet/in.h&gt;<br>
      #include&lt;arpa/inet.h&gt;<br>
      #define PORT 2345<br>
      #define SERVER_IP “127.0.0.1”<br>
      main()<br>
      {<br>
      int s,len;<br>
      struct sockaddr_in addr;<br>
      int addr_len =sizeof(struct sockaddr_in);<br>
      char buffer[256];<br>
      /* 建立socket*/<br>
      if((s = socket(AF_INET,SOCK_DGRAM,0))&lt;0){<br>
      perror(“socket”);<br>
      exit(1);<br>
      }<br>
      /* 填寫sockaddr_in*/<br>
      bzero(&addr,sizeof(addr));<br>
      addr.sin_family = AF_INET;<br>
      addr.sin_port = htons(PORT);<br>
      addr.sin_addr.s_addr = inet_addr(SERVER_IP);<br>
      while(1){<br>
      bzero(buffer,sizeof(buffer));<br>
      /* 從標準輸入設備取得字符串*/<br>
      len =read(STDIN_FILENO,buffer,sizeof(buffer));<br>
      /* 將字符串傳送給server端*/<br>
      sendto(s,buffer,len,0,&addr,addr_len);<br>
      /* 接收server端返回的字符串*/<br>
      len = recvfrom(s,buffer,sizeof(buffer),0,&addr,&addr_len);<br>
      printf(“receive: %s”,buffer);<br>
      }<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> (先執行udp server 再執行udp client)<br>
      hello /*從鍵盤輸入字符串*/<br>
      receive: hello /*server端返回來的字符串*/<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc279></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      recvmsg（經socket接收數據） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> recv，recvfrom，send，sendto，sendmsg，socket<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socktet.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int recvmsg(int s,struct msghdr 
      *msg,unsigned int flags);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> recvmsg()用來接收遠程主機經指定的socket傳來的數據。參數s為已建立好連線的socket，如果利用UDP協議則不需經過連線操作。參數msg指向欲連線的數據結構內容，參數flags一般設0，詳細描述請參考send()。關於結構msghdr的定義請參考sendmsg()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回接收到的字符數，失敗則返回-1，錯誤原因存於errno中。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s非合法的socket處理代碼。<br>
      EFAULT 參數中有一指針指向無法存取的內存空間<br>
      ENOTSOCK 參數s為一文件描述詞，非socket。<br>
      EINTR 被信號所中斷。<br>
      EAGAIN 此操作會令進程阻斷，但參數s的socket為不可阻斷。<br>
      ENOBUFS 系統的緩衝內存不足<br>
      ENOMEM 核心內存不足<br>
      EINVAL 傳給系統調用的參數不正確。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考recvfrom()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc280></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      send（經socket傳送數據） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> sendto，sendmsg，recv，recvfrom，socket<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int send(int s,const void * msg,int 
      len,unsigned int falgs);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> send()用來將數據由指定的socket 傳給對方主機。參數s為已建立好連接的socket。參數msg指向欲連線的數據內容，參數len則為數據長度。參數flags一般設0，其他數值定義如下<br>
      MSG_OOB 傳送的數據以out-of-band 送出。<br>
      MSG_DONTROUTE 取消路由表查詢<br>
      MSG_DONTWAIT 設置為不可阻斷運作<br>
      MSG_NOSIGNAL 此動作不願被SIGPIPE 信號中斷。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回實際傳送出去的字符數，失敗返回-1。錯誤原因存於errno<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s 非合法的socket處理代碼。<br>
      EFAULT 參數中有一指針指向無法存取的內存空間<br>
      ENOTSOCK 參數s為一文件描述詞，非socket。<br>
      EINTR 被信號所中斷。<br>
      EAGAIN 此操作會令進程阻斷，但參數s的socket為不可阻斷。<br>
      ENOBUFS 系統的緩衝內存不足<br>
      ENOMEM 核心內存不足<br>
      EINVAL 傳給系統調用的參數不正確。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考connect()<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc281></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      sendmsg（經socket傳送數據） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> send，sendto，recv，recvfrom，recvmsg，socket<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int sendmsg(int s,const strcut 
      msghdr *msg,unsigned int flags);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> sendmsg()用來將數據由指定的socket傳給對方主機。參數s為已建立好連線的socket，如果利用UDP協議則不需經過連線操作。參數msg 
      指向欲連線的數據結構內容，參數flags一般默認為0，詳細描述請參考send()。<br>
      結構msghdr定義如下<br>
      struct msghdr<br>
      {<br>
      void *msg_name; /*Address to send to /receive from . */<br>
      socklen_t msg_namelen; /* Length of addres data */<br>
      strcut iovec * msg_iov; /* Vector of data to send/receive into */<br>
      size_t msg_iovlen; /* Number of elements in the vector */<br>
      void * msg_control; /* Ancillary dat */<br>
      size_t msg_controllen; /* Ancillary data buffer length */<br>
      int msg_flags; /* Flags on received message */<br>
      };<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回實際傳送出去的字符數，失敗返回-1，錯誤原因存於errno<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s 非合法的socket處理代碼。<br>
      EFAULT 參數中有一指針指向無法存取的內存空間<br>
      ENOTSOCK 參數s為一文件描述詞，非socket。<br>
      EINTR 被信號所中斷。<br>
      EAGAIN 此操作會令進程阻斷，但參數s的socket為不可阻斷。<br>
      ENOBUFS 系統的緩衝內存不足<br>
      ENOMEM 核心內存不足<br>
      EINVAL 傳給系統調用的參數不正確。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考sendto()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc282></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      sendto（經socket傳送數據） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> send , sendmsg,recv , recvfrom 
      , socket<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include &lt; sys/types.h &gt;<br>
      #include &lt; sys/socket.h &gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int sendto ( int s , const void 
      * msg, int len, unsigned int flags, const <br>
      struct sockaddr * to , int tolen ) ;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> sendto() 用來將數據由指定的socket傳給對方主機。參數s為已建好連線的socket,如果利用UDP協議則不需經過連線操作。參數msg指向欲連線的數據內容，參數flags 
      一般設0，詳細描述請參考send()。參數to用來指定欲傳送的網絡地址，結構sockaddr請參考bind()。參數tolen為sockaddr的結果長度。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回實際傳送出去的字符數，失敗返回－1，錯誤原因存於errno 
      中。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s非法的socket處理代碼。<br>
      EFAULT 參數中有一指針指向無法存取的內存空間。<br>
      WNOTSOCK canshu s為一文件描述詞，非socket。<br>
      EINTR 被信號所中斷。<br>
      EAGAIN 此動作會令進程阻斷，但參數s的soket為補課阻斷的。<br>
      ENOBUFS 系統的緩衝內存不足。<br>
      EINVAL 傳給系統調用的參數不正確。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include &lt; sys/types.h &gt;<br>
      #include &lt; sys/socket.h &gt;<br>
      # include &lt;netinet.in.h&gt;<br>
      #include &lt;arpa.inet.h&gt;<br>
      #define PORT 2345 /*使用的port*/<br>
      main(){<br>
      int sockfd,len;<br>
      struct sockaddr_in addr;<br>
      char buffer[256];<br>
      /*建立socket*/<br>
      if(sockfd=socket (AF_INET,SOCK_DGRAM,0))&lt;0){<br>
      perror (“socket”);<br>
      exit(1);<br>
      }<br>
      /*填寫sockaddr_in 結構*/<br>
      bzero ( &addr, sizeof(addr) );<br>
      addr.sin_family=AF_INET;<br>
      addr.sin_port=htons(PORT);<br>
      addr.sin_addr=hton1(INADDR_ANY) ;<br>
      if (bind(sockfd, &addr, sizeof(addr))&lt;0){<br>
      perror(“connect”);<br>
      exit(1);<br>
      }<br>
      while(1){<br>
      bezro(buffer,sizeof(buffer));<br>
      len = recvfrom(socket,buffer,sizeof(buffer), 0 , &addr &addr_len);<br>
      /*顯示client端的網絡地址*/<br>
      printf(“receive from %s\n “ , inet_ntoa( addr.sin_addr));<br>
      /*將字串返回給client端*/<br>
      sendto(sockfd,buffer,len,0,&addr,addr_len);”<br>
      }<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 請參考recvfrom()<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc283></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      setprotoent（打開網絡協議的數據文件） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> getprotobyname, getprotobynumber, 
      endprotoent<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include &lt;netdb.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> void setprotoent (int stayopen);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> setprotoent()用來打開/etc/protocols， 
      如果參數stayopen值為1，則接下來的getprotobyname()或getprotobynumber()將不會自動關閉此文件。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc284></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      setservent（打開主機網絡服務的數據文件） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> getservent, getservbyname, getservbyport, 
      endservent<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include &lt; netdb.h &gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> void setservent (int stayopen);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> setservent()用來打開/etc/services，如果參數stayopen值為1，則接下來的getservbyname()或getservbyport()將補回自動關閉文件。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc285></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      setsockopt（設置socket狀態） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> getsockopt<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int setsockopt(int s,int level,int 
      optname,const void * optval,,socklen_toptlen);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> setsockopt()用來設置參數s所指定的socket狀態。參數level代表欲設置的網絡層，一般設成SOL_SOCKET以存取socket層。參數optname代表欲設置的選項，有下列幾種數值:<br>
      SO_DEBUG 打開或關閉排錯模式<br>
      SO_REUSEADDR 允許在bind（）過程中本地地址可重複使用<br>
      SO_TYPE 返回socket形態。<br>
      SO_ERROR 返回socket已發生的錯誤原因<br>
      SO_DONTROUTE 送出的數據包不要利用路由設備來傳輸。<br>
      SO_BROADCAST 使用廣播方式傳送<br>
      SO_SNDBUF 設置送出的暫存區大小<br>
      SO_RCVBUF 設置接收的暫存區大小<br>
      SO_KEEPALIVE 定期確定連線是否已終止。<br>
      SO_OOBINLINE 當接收到OOB 數據時會馬上送至標準輸入設備<br>
      SO_LINGER 確保數據安全且可靠的傳送出去。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 參數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> optval代表欲設置的值，參數optlen則為optval的長度。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回0，若有錯誤則返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 附加說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s並非合法的socket處理代碼<br>
      ENOTSOCK 參數s為一文件描述詞，非socket<br>
      ENOPROTOOPT 參數optname指定的選項不正確。<br>
      EFAULT 參數optval指針指向無法存取的內存空間。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考getsockopt()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc286></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      shutdown（終止socket通信） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> socket，connect<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int shutdown(int s,int how);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> shutdown()用來終止參數s所指定的socket連線。參數s是連線中的socket處理代碼，參數how有下列幾種情況:<br>
      how=0 終止讀取操作。<br>
      how=1 終止傳送操作<br>
      how=2 終止讀取及傳送操作<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回0，失敗返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EBADF 參數s不是有效的socket處理代碼<br>
      ENOTSOCK 參數s為一文件描述詞，非socket<br>
      ENOTCONN 參數s指定的socket並未連線<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc287></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> <br>
      socket（建立一個socket通信） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> accept，bind，connect，listen<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/socket.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> int socket(int domain,int type,int 
      protocol);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> socket()用來建立一個新的socket，也就是向系統註冊，通知系統建立一通信端口。參數domain 
      指定使用何種的地址類型，完整的定義在/usr/include/bits/socket.h 內，底下是常見的協議:<br>
      PF_UNIX/PF_LOCAL/AF_UNIX/AF_LOCAL UNIX 進程通信協議<br>
      PF_INET?AF_INET Ipv4網絡協議<br>
      PF_INET6/AF_INET6 Ipv6 網絡協議<br>
      PF_IPX/AF_IPX IPX-Novell協議<br>
      PF_NETLINK/AF_NETLINK 核心用戶接口裝置<br>
      PF_X25/AF_X25 ITU-T X.25/ISO-8208 協議<br>
      PF_AX25/AF_AX25 業餘無線AX.25協議<br>
      PF_ATMPVC/AF_ATMPVC 存取原始ATM PVCs<br>
      PF_APPLETALK/AF_APPLETALK appletalk（DDP）協議<br>
      PF_PACKET/AF_PACKET 初級封包接口<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 參數 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> type有下列幾種數值:<br>
      SOCK_STREAM 提供雙向連續且可信賴的數據流，即TCP。支持<br>
      OOB 機制，在所有數據傳送前必須使用connect()來建立連線狀態。<br>
      SOCK_DGRAM 使用不連續不可信賴的數據包連接<br>
      SOCK_SEQPACKET 提供連續可信賴的數據包連接<br>
      SOCK_RAW 提供原始網絡協議存取<br>
      SOCK_RDM 提供可信賴的數據包連接<br>
      SOCK_PACKET 提供和網絡驅動程序直接通信。<br>
      protocol用來指定socket所使用的傳輸協議編號，通常此參考不用管它，設為0即可。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 成功則返回socket處理代碼，失敗返回-1。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> EPROTONOSUPPORT 參數domain指定的類型不支持參數type或protocol指定的協議<br>
      ENFILE 核心內存不足，無法建立新的socket結構<br>
      EMFILE 進程文件表溢出，無法再建立新的socket<br>
      EACCESS 權限不足，無法建立type或protocol指定的協議<br>
      ENOBUFS/ENOMEM 內存不足<br>
      EINVAL 參數domain/type/protocol不合法<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td valign="top"> <font face='宋體' size='2'> 參考connect()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
      </div>
    </td>
  </tr>
</table>
</body>
</html>
