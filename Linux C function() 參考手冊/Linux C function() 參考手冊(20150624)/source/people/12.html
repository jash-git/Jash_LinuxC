<html>
<head>
<title>Untitled Document</title>
</head>
<body>
<table width="100%">
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc211></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      access（判斷是否具有存取文件的權限） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> stat，open，chmod，chown，setuid，setgid<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int access(const char * pathname,int mode);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> access()會檢查是否可以讀/寫某一已存在的文件。參數mode有幾種情況組合，R_OK，W_OK，X_OK 
      和F_OK。R_OK，W_OK與X_OK用來檢查文件是否具有讀取、寫入和執行的權限。F_OK則是用來判斷該文件是否存在。由於access()只作權限的核查，並不理會文件形態或文件內容，因此，如果一目錄表示為“可寫入”，表示可以在該目錄中建立新文件等操作，而非意味此目錄可以被當做文件處理。例如，你會發現DOS的文件都具有“可執行”權限，但用execve()執行時則會失敗。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 若所有欲查核的權限都通過了檢查則返回0值，表示成功，只要有一權限被禁止則返回-1。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EACCESS 參數pathname 所指定的文件不符合所要求測試的權限。<br>
      EROFS 欲測試寫入權限的文件存在於只讀文件系統內。<br>
      EFAULT 參數pathname指針超出可存取內存空間。<br>
      EINVAL 參數mode 不正確。<br>
      ENAMETOOLONG 參數pathname太長。<br>
      ENOTDIR 參數pathname為一目錄。<br>
      ENOMEM 核心內存不足<br>
      ELOOP 參數pathname有過多符號連接問題。<br>
      EIO I/O 存取錯誤。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 附加說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 使用access()作用戶認證方面的判斷要特別小心，例如在access()後再做open()的空文件可能會造成系統安全上的問題。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /* 判斷是否允許讀取/etc/passwd */<br>
      #include&lt;unistd.h&gt;<br>
      int main()<br>
      {<br>
      if (access(“/etc/passwd”,R_OK) = =0)<br>
      printf(“/etc/passwd can be read\n”);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /etc/passwd can be read<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc212></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      alphasort（依字母順序排序目錄結構） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> scandir，qsort<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;dirent.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int alphasort(const struct dirent **a,const 
      struct dirent **b);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> alphasort()為scandir()最後調用qsort()函數時傳給qsort()作為判斷的函數，詳細說明請參考scandir()及qsort()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 參考qsort()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /* 讀取/目錄下所有的目錄結構，並依字母順序排列*/<br>
      main()<br>
      {<br>
      struct dirent **namelist;<br>
      int i,total;<br>
      total = scandir(“/”,&namelist ,0,alphasort);<br>
      if(total &lt;0)<br>
      perror(“scandir”);<br>
      else{<br>
      for(i=0;i&lt;total;i++)<br>
      printf(“%s\n”,namelist[i]-&gt;d_name);<br>
      printf(“total = %d\n”,total);<br>
      }<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> ..<br>
      .gnome<br>
      .gnome_private<br>
      ErrorLog<br>
      Weblog<br>
      bin<br>
      boot<br>
      dev<br>
      dosc<br>
      dosd<br>
      etc<br>
      home<br>
      lib<br>
      lost+found<br>
      misc<br>
      mnt<br>
      opt<br>
      proc<br>
      root<br>
      sbin<br>
      tmp<br>
      usr<br>
      var<br>
      total = 24<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc213></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      chdir（改變當前的工作（目錄） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> getcwd，chroot<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int chdir(const char * path);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> chdir()用來將當前的工作目錄改變成以參數path所指的目錄。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 執行成功則返回0，失敗返回-1，errno為錯誤代碼。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      chdir(“/tmp”);<br>
      printf(“current working directory: %s\n”,getcwd(NULL,NULL));<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> current working directory :/tmp<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc214></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      chmod（改變文件的權限） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> fchmod，stat，open，chown<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/stat.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int chmod(const char * path,mode_t mode);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> chmod()會依參數mode 權限來更改參數path 指定文件的權限。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 參數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> mode 有下列數種組合<br>
      S_ISUID 04000 文件的（set user-id on execution）位<br>
      S_ISGID 02000 文件的（set group-id on execution）位<br>
      S_ISVTX 01000 文件的sticky位<br>
      S_IRUSR（S_IREAD） 00400 文件所有者具可讀取權限<br>
      S_IWUSR（S_IWRITE）00200 文件所有者具可寫入權限<br>
      S_IXUSR（S_IEXEC） 00100 文件所有者具可執行權限<br>
      S_IRGRP 00040 用戶組具可讀取權限<br>
      S_IWGRP 00020 用戶組具可寫入權限<br>
      S_IXGRP 00010 用戶組具可執行權限<br>
      S_IROTH 00004 其他用戶具可讀取權限<br>
      S_IWOTH 00002 其他用戶具可寫入權限<br>
      S_IXOTH 00001 其他用戶具可執行權限<br>
      只有該文件的所有者或有效用戶識別碼為0，才可以修改該文件權限。基於系統安全，如果欲將數據寫入一執行文件，而該執行文件具有S_ISUID 或S_ISGID 
      權限，則這兩個位會被清除。如果一目錄具有S_ISUID 位權限，表示在此目錄下只有該文件的所有者或root可以刪除該文件。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 權限改變成功返回0，失敗返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EPERM 進程的有效用戶識別碼與欲修改權限的文件擁有者不同，而且也不具root權限。<br>
      EACCESS 參數path所指定的文件無法存取。<br>
      EROFS 欲寫入權限的文件存在於只讀文件系統內。<br>
      EFAULT 參數path指針超出可存取內存空間。<br>
      EINVAL 參數mode不正確<br>
      ENAMETOOLONG 參數path太長<br>
      ENOENT 指定的文件不存在<br>
      ENOTDIR 參數path路徑並非一目錄<br>
      ENOMEM 核心內存不足<br>
      ELOOP 參數path有過多符號連接問題。<br>
      EIO I/O 存取錯誤<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /* 將/etc/passwd 文件權限設成S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH 
      */<br>
      #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/stat.h&gt;<br>
      main()<br>
      {<br>
      chmod(“/etc/passwd”,S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc215></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      chown（改變文件的所有者） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> fchown，lchown，chmod<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int chown(const char * path, uid_t owner,gid_t 
      group);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> chown()會將參數path指定文件的所有者變更為參數owner代表的用戶，而將該文件的組變更為參數group組。如果參數owner或group為-1，對應的所有者或組不會有所改變。root與文件所有者皆可改變文件組，但所有者必須是參數group組的成員。當root用chown()改變文件所有者或組時，該文件若具有S_ISUID或S_ISGID權限，則會清除此權限位，此外如果具有S_ISGID權限但不具S_IXGRP位，則該文件會被強制鎖定，文件模式會保留。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 成功則返回0，失敗返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 參考chmod（）。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /* 將/etc/passwd 的所有者和組都設為root */<br>
      #include&lt;sys/types.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      chown(“/etc/passwd”,0,0);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc216></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      chroot（改變根目錄） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> chdir<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int chroot(const char * path);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> chroot()用來改變根目錄為參數path 所指定的目錄。只有超級用戶才允許改變根目錄，子進程將繼承新的根目錄。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 調用成功則返回0，失敗則返-1，錯誤代碼存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EPERM 權限不足，無法改變根目錄。<br>
      EFAULT 參數path指針超出可存取內存空間。<br>
      ENAMETOOLONG 參數path太長。<br>
      ENOTDIR 路徑中的目錄存在但卻非真正的目錄。<br>
      EACCESS 存取目錄時被拒絕<br>
      ENOMEM 核心內存不足。<br>
      ELOOP 參數path有過多符號連接問題。<br>
      EIO I/O 存取錯誤。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /* 將根目錄改為/tmp ,並將工作目錄切換至/tmp */<br>
      #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      chroot(“/tmp”);<br>
      chdir(“/”);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc217></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      closedir（關閉目錄） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> opendir<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;dirent.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int closedir(DIR *dir);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> closedir()關閉參數dir所指的目錄流。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 關閉成功則返回0，失敗返回-1，錯誤原因存於errno 中。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EBADF 參數dir為無效的目錄流<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 參考readir()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc218></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      fchdir（改變當前的工作目錄） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> getcwd，chroot<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int fchdir(int fd);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> fchdir()用來將當前的工作目錄改變成以參數fd 所指的文件描述詞。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值執 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 行成功則返回0，失敗返回-1，errno為錯誤代碼。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 附加說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/stat.h&gt;<br>
      #include&lt;fcntl.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      int fd;<br>
      fd = open(“/tmp”,O_RDONLY);<br>
      fchdir(fd);<br>
      printf(“current working directory : %s \n”,getcwd(NULL,NULL));<br>
      close(fd);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> current working directory : /tmp<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc219></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      fchmod（改變文件的權限） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> chmod，stat，open，chown<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/stat.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int fchmod(int fildes,mode_t mode);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> fchmod()會依參數mode權限來更改參數fildes所指文件的權限。參數fildes為已打開文件的文件描述詞。參數mode請參考chmod（）。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 權限改變成功則返回0，失敗返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤原因 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EBADF 參數fildes為無效的文件描述詞。<br>
      EPERM 進程的有效用戶識別碼與欲修改權限的文件所有者不同，而且也不具root權限。<br>
      EROFS 欲寫入權限的文件存在於只讀文件系統內。<br>
      EIO I/O 存取錯誤。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/stat.h&gt;<br>
      #include&lt;fcntl.h&gt;<br>
      main()<br>
      {<br>
      int fd;<br>
      fd = open (“/etc/passwd”,O_RDONLY);<br>
      fchmod(fd,S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH);<br>
      close(fd);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc220></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      fchown（改變文件的所有者） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> chown，lchown，chmod<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int fchown(int fd,uid_t owner,gid_t group);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> fchown()會將參數fd指定文件的所有者變更為參數owner代表的用戶，而將該文件的組變更為參數group組。如果參數owner或group為-1，對映的所有者或組有所改變。參數fd 
      為已打開的文件描述詞。當root用fchown()改變文件所有者或組時，該文件若具S_ISUID或S_ISGID權限，則會清除此權限位。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 成功則返回0，失敗則返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EBADF 參數fd文件描述詞為無效的或該文件已關閉。<br>
      EPERM 進程的有效用戶識別碼與欲修改權限的文件所有者不同，而且也不具root權限，或是參數owner、group不正確。<br>
      EROFS 欲寫入的文件存在於只讀文件系統內。<br>
      ENOENT 指定的文件不存在<br>
      EIO I/O存取錯誤<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      #include&lt;fcntl.h&gt;<br>
      main()<br>
      {<br>
      int fd;<br>
      fd = open (“/etc/passwd”,O_RDONLY);<br>
      chown(fd,0,0);<br>
      close(fd);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc221></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      fstat（由文件描述詞取得文件狀態） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> stat，lstat，chmod，chown，readlink，utime<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/stat.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int fstat(int fildes,struct stat *buf);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> fstat()用來將參數fildes所指的文件狀態，複製到參數buf所指的結構中(struct 
      stat)。Fstat()與stat()作用完全相同，不同處在於傳入的參數為已打開的文件描述詞。詳細內容請參考stat()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 執行成功則返回0，失敗返回-1，錯誤代碼存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/stat.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      #include&lt;fcntk.h&gt;<br>
      main()<br>
      {<br>
      struct stat buf;<br>
      int fd;<br>
      fd = open (“/etc/passwd”,O_RDONLY);<br>
      fstat(fd,&buf);<br>
      printf(“/etc/passwd file size +%d\n “,buf.st_size);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /etc/passwd file size = 705<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc222></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      ftruncate（改變文件大小） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> open，truncate<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int ftruncate(int fd,off_t length);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> ftruncate()會將參數fd指定的文件大小改為參數length指定的大小。參數fd為已打開的文件描述詞，而且必須是以寫入模式打開的文件。如果原來的文件大小比參數length大，則超過的部分會被刪去。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 執行成功則返回0，失敗返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EBADF 參數fd文件描述詞為無效的或該文件已關閉。<br>
      EINVAL 參數fd 為一socket 並非文件，或是該文件並非以寫入模式打開。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc223></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      getcwd（取得當前的工作目錄） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> get_current_dir_name，getwd，chdir<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> char * getcwd(char * buf,size_t size);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> getcwd()會將當前的工作目錄絕對路徑複製到參數buf所指的內存空間，參數size為buf的空間大小。在調用此函數時，buf所指的內存空間要足夠大，若工作目錄絕對路徑的字符串長度超過參數size大小，則回值NULL，errno的值則為ERANGE。倘若參數buf為NULL，getcwd()會依參數size的大小自動配置內存(使用malloc())，如果參數size也為0，則getcwd()會依工作目錄絕對路徑的字符串程度來決定所配置的內存大小，進程可以在使用完此字符串後利用free()來釋放此空間。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 執行成功則將結果複製到參數buf所指的內存空間，或是返回自動配置的字符串指針。失敗返回NULL，錯誤代碼存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      char buf[80];<br>
      getcwd(buf,sizeof(buf));<br>
      printf(“current working directory : %s\n”,buf);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> current working directory :/tmp<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc224></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      link（建立文件連接） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> symlink，unlink<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int link (const char * oldpath,const char * 
      newpath);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> link()以參數newpath指定的名稱來建立一個新的連接(硬連接)到參數oldpath所指定的已存在文件。如果參數newpath指定的名稱為一已存在的文件則不會建立連接。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 成功則返回0，失敗返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 附加說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> link()所建立的硬連接無法跨越不同文件系統，如果需要請改用symlink()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EXDEV 參數oldpath與newpath不是建立在同一文件系統。<br>
      EPERM 參數oldpath與newpath所指的文件系統不支持硬連接<br>
      EROFS 文件存在於只讀文件系統內<br>
      EFAULT 參數oldpath或newpath 指針超出可存取內存空間。<br>
      ENAMETOLLONG 參數oldpath或newpath太長<br>
      ENOMEM 核心內存不足<br>
      EEXIST 參數newpath所指的文件名已存在。<br>
      EMLINK 參數oldpath所指的文件已達最大連接數目。<br>
      ELOOP 參數pathname有過多符號連接問題<br>
      ENOSPC 文件系統的剩餘空間不足。<br>
      EIO I/O 存取錯誤。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /* 建立/etc/passwd 的硬連接為pass */<br>
      #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      link(“/etc/passwd”,”pass”);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc225></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      lstat（由文件描述詞取得文件狀態） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> stat，fstat，chmod，chown，readlink，utime<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/stat.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int lstat (const char * file_name.struct stat 
      * buf);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> lstat()與stat()作用完全相同，都是取得參數file_name所指的文件狀態，其差別在於，當文件為符號連接時，lstat()會返回該link本身的狀態。詳細內容請參考stat()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 執行成功則返回0，失敗返回-1，錯誤代碼存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 參考stat()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc226></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      opendir（打開目錄） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> open，readdir，closedir，rewinddir，seekdir，telldir，scandir<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;dirent.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> DIR * opendir(const char * name);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> opendir()用來打開參數name指定的目錄，並返回DIR*形態的目錄流，和open()類似，接下來對目錄的讀取和搜索都要使用此返回值。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 成功則返回DIR* 型態的目錄流，打開失敗則返回NULL。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EACCESS 權限不足<br>
      EMFILE 已達到進程可同時打開的文件數上限。<br>
      ENFILE 已達到系統可同時打開的文件數上限。<br>
      ENOTDIR 參數name非真正的目錄<br>
      ENOENT 參數name 指定的目錄不存在，或是參數name 為一空字符串。<br>
      ENOMEM 核心內存不足。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc227></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      readdir（讀取目錄） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> open，opendir，closedir，rewinddir，seekdir，telldir，scandir<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;dirent.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> struct dirent * readdir(DIR * dir);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> readdir()返回參數dir目錄流的下個目錄進入點。<br>
      結構dirent定義如下<br>
      struct dirent<br>
      {<br>
      ino_t d_ino;<br>
      ff_t d_off;<br>
      signed short int d_reclen;<br>
      unsigned char d_type;<br>
      har d_name[256;<br>
      };<br>
      d_ino 此目錄進入點的inode<br>
      d_off 目錄文件開頭至此目錄進入點的位移<br>
      d_reclen _name的長度，不包含NULL字符<br>
      d_type d_name 所指的文件類型<br>
      d_name 文件名<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 成功則返回下個目錄進入點。有錯誤發生或讀取到目錄文件尾則返回NULL。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 附加說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EBADF參數dir為無效的目錄流。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;dirent.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      DIR * dir;<br>
      struct dirent * ptr;<br>
      int i;<br>
      dir =opendir(“/etc/rc.d”);<br>
      while((ptr = readdir(dir))!=NULL)<br>
      {<br>
      printf(“d_name: %s\n”,ptr-&gt;d_name);<br>
      }<br>
      closedir(dir);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> d_name:.<br>
      d_name:..<br>
      d_name:init.d<br>
      d_name:rc0.d<br>
      d_name:rc1.d<br>
      d_name:rc2.d<br>
      d_name:rc3.d<br>
      d_name:rc4.d<br>
      d_name:rc5.d<br>
      d_name:rc6.d<br>
      d_name:rc<br>
      d_name:rc.local<br>
      d_name:rc.sysinit<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc228></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      readlink（取得符號連接所指的文件） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> stat，lstat，symlink<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int readlink(const char * path ,char * buf,size_t 
      bufsiz);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> readlink()會將參數path的符號連接內容存到參數buf所指的內存空間，返回的內容不是以NULL作字符串結尾，但會將字符串的字符數返回。若參數bufsiz小於符號連接的內容長度，過長的內容會被截斷。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 執行成功則傳符號連接所指的文件路徑字符串，失敗則返回-1，錯誤代碼存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EACCESS 取文件時被拒絕，權限不夠<br>
      EINVAL 參數bufsiz 為負數<br>
      EIO I/O 存取錯誤。<br>
      ELOOP 欲打開的文件有過多符號連接問題。<br>
      ENAMETOOLONG 參數path的路徑名稱太長<br>
      ENOENT 參數path所指定的文件不存在<br>
      ENOMEM 核心內存不足<br>
      ENOTDIR 參數path路徑中的目錄存在但卻非真正的目錄。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc229></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      remove（刪除文件） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> link，rename，unlink<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;stdio.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int remove(const char * pathname);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> remove()會刪除參數pathname指定的文件。如果參數pathname為一文件，則調用unlink()處理，若參數pathname為一目錄，則調用rmdir()來處理。請參考unlink()與rmdir()。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 成功則返回0，失敗則返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EROFS 欲寫入的文件存在於只讀文件系統內<br>
      EFAULT 參數pathname指針超出可存取內存空間<br>
      ENAMETOOLONG 參數pathname太長<br>
      ENOMEM 核心內存不足<br>
      ELOOP 參數pathname有過多符號連接問題<br>
      EIO I/O 存取錯誤。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc230></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      rename（更改文件名稱或位置） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> link，unlink，symlink<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;stdio.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int rename(const char * oldpath,const char 
      * newpath);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> rename()會將參數oldpath 所指定的文件名稱改為參數newpath所指的文件名稱。若newpath所指定的文件已存在，則會被刪除。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 執行成功則返回0，失敗返回-1，錯誤原因存於errno<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /* 設計一個DOS下的rename指令rename 舊文件名新文件名*/<br>
      #include &lt;stdio.h&gt;<br>
      void main(int argc,char **argv)<br>
      {<br>
      if(argc&lt;3){<br>
      printf(“Usage: %s old_name new_name\n”,argv[0]);<br>
      return;<br>
      }<br>
      printf(“%s=&gt;%s”,argc[1],argv[2]);<br>
      if(rename(argv[1],argv[2]&lt;0)<br>
      printf(“error!\n”);<br>
      else<br>
      printf(“ok!\n”);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc231></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      rewinddir（重設讀取目錄的位置為開頭位置） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> open，opendir，closedir，telldir，seekdir，readdir，scandir<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;dirent.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> void rewinddir(DIR *dir);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> rewinddir()用來設置參數dir 目錄流目前的讀取位置為原來開頭的讀取位置。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EBADF dir為無效的目錄流<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;dirent.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      DIR * dir;<br>
      struct dirent *ptr;<br>
      dir = opendir(“/etc/rc.d”);<br>
      while((ptr = readdir(dir))!=NULL)<br>
      {<br>
      printf(“d_name :%s\n”,ptr-&gt;d_name);<br>
      }<br>
      rewinddir(dir);<br>
      printf(“readdir again!\n”);<br>
      while((ptr = readdir(dir))!=NULL)<br>
      {<br>
      printf(“d_name: %s\n”,ptr-&gt;d_name);<br>
      }<br>
      closedir(dir);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> d_name:.<br>
      d_name:..<br>
      d_name:init.d<br>
      d_name:rc0.d<br>
      d_name:rc1.d<br>
      d_name:rc2.d<br>
      d_name:rc3.d<br>
      d_name:rc4.d<br>
      d_name:rc5.d<br>
      d_name:rc6.d<br>
      d_name:rc<br>
      d_name:rc.local<br>
      d_name:rc.sysinit<br>
      readdir again!<br>
      d_name:.<br>
      d_name:..<br>
      d_name:init.d<br>
      d_name:rc0.d<br>
      d_name:rc1.d<br>
      d_name:rc2.d<br>
      d_name:rc3.d<br>
      d_name:rc4.d<br>
      d_name:rc5.d<br>
      d_name:rc6.d<br>
      d_name:rc<br>
      d_name:rc.local<br>
      d_name:rc.sysinit<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc232></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      seekdir（設置下回讀取目錄的位置） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> open，opendir，closedir，rewinddir，telldir，readdir，scandir<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;dirent.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> void seekdir(DIR * dir,off_t offset);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> seekdir()用來設置參數dir目錄流目前的讀取位置，在調用readdir()時便從此新位置開始讀取。參數offset 
      代表距離目錄文件開頭的偏移量。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EBADF 參數dir為無效的目錄流<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;dirent.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      DIR * dir;<br>
      struct dirent * ptr;<br>
      int offset,offset_5,i=0;<br>
      dir=opendir(“/etc/rc.d”);<br>
      while((ptr = readdir(dir))!=NULL)<br>
      {<br>
      offset = telldir(dir);<br>
      if(++i = =5) offset_5 =offset;<br>
      printf(“d_name :%s offset :%d \n”,ptr-&gt;d_name,offset);<br>
      }<br>
      seekdir(dir offset_5);<br>
      printf(“Readdir again!\n”);<br>
      while((ptr = readdir(dir))!=NULL)<br>
      {<br>
      offset = telldir(dir);<br>
      printf(“d_name :%s offset :%d\n”,ptr-&gt;d_name.offset);<br>
      }<br>
      closedir(dir);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> d_name : . offset :12<br>
      d_name : .. offset:24<br>
      d_name : init.d offset 40<br>
      d_name : rc0.d offset :56<br>
      d_name :rc1.d offset :72<br>
      d_name:rc2.d offset :88<br>
      d_name:rc3.d offset 104<br>
      d_name:rc4.d offset:120<br>
      d_name:rc5.d offset:136<br>
      d_name:rc6.d offset:152<br>
      d_name:rc offset 164<br>
      d_name:rc.local offset :180<br>
      d_name:rc.sysinit offset :4096<br>
      readdir again!<br>
      d_name:rc2.d offset :88<br>
      d_name:rc3.d offset 104<br>
      d_name:rc4.d offset:120<br>
      d_name:rc5.d offset:136<br>
      d_name:rc6.d offset:152<br>
      d_name:rc offset 164<br>
      d_name:rc.local offset :180<br>
      d_name:rc.sysinit offset :4096<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc233></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      stat（取得文件狀態） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> fstat，lstat，chmod，chown，readlink，utime<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/stat.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int stat(const char * file_name,struct stat 
      *buf);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> stat()用來將參數file_name所指的文件狀態，複製到參數buf所指的結構中。<br>
      下面是struct stat內各參數的說明<br>
      struct stat<br>
      {<br>
      dev_t st_dev; /*device*/<br>
      ino_t st_ino; /*inode*/<br>
      mode_t st_mode; /*protection*/<br>
      nlink_t st_nlink; /*number of hard links */<br>
      uid_t st_uid; /*user ID of owner*/<br>
      gid_t st_gid; /*group ID of owner*/<br>
      dev_t st_rdev; /*device type */<br>
      off_t st_size; /*total size, in bytes*/<br>
      unsigned long st_blksize; /*blocksize for filesystem I/O */<br>
      unsigned long st_blocks; /*number of blocks allocated*/<br>
      time_t st_atime; /* time of lastaccess*/<br>
      time_t st_mtime; /* time of last modification */<br>
      time_t st_ctime; /* time of last change */<br>
      };<br>
      st_dev 文件的設備編號<br>
      st_ino 文件的i-node<br>
      st_mode 文件的類型和存取的權限<br>
      st_nlink 連到該文件的硬連接數目，剛建立的文件值為1。<br>
      st_uid 文件所有者的用戶識別碼<br>
      st_gid 文件所有者的組識別碼<br>
      st_rdev 若此文件為裝置設備文件，則為其設備編號<br>
      st_size 文件大小，以字節計算<br>
      st_blksize 文件系統的I/O 緩衝區大小。<br>
      st_blcoks 占用文件區塊的個數，每一區塊大小為512 個字節。<br>
      st_atime 文件最近一次被存取或被執行的時間，一般只有在用mknod、utime、read、write與tructate時改變。<br>
      st_mtime 文件最後一次被修改的時間，一般只有在用mknod、utime和write時才會改變<br>
      st_ctime i-node最近一次被更改的時間，此參數會在文件所有者、組、權限被更改時更新先前所描述的st_mode 則定義了下列數種情況<br>
      S_IFMT 0170000 文件類型的位遮罩<br>
      S_IFSOCK 0140000 scoket<br>
      S_IFLNK 0120000 符號連接<br>
      S_IFREG 0100000 一般文件<br>
      S_IFBLK 0060000 區塊裝置<br>
      S_IFDIR 0040000 目錄<br>
      S_IFCHR 0020000 字符裝置<br>
      S_IFIFO 0010000 先進先出<br>
      S_ISUID 04000 文件的（set user-id on execution）位<br>
      S_ISGID 02000 文件的（set group-id on execution）位<br>
      S_ISVTX 01000 文件的sticky位<br>
      S_IRUSR（S_IREAD） 00400 文件所有者具可讀取權限<br>
      S_IWUSR（S_IWRITE）00200 文件所有者具可寫入權限<br>
      S_IXUSR（S_IEXEC） 00100 文件所有者具可執行權限<br>
      S_IRGRP 00040 用戶組具可讀取權限<br>
      S_IWGRP 00020 用戶組具可寫入權限<br>
      S_IXGRP 00010 用戶組具可執行權限<br>
      S_IROTH 00004 其他用戶具可讀取權限<br>
      S_IWOTH 00002 其他用戶具可寫入權限<br>
      S_IXOTH 00001 其他用戶具可執行權限<br>
      上述的文件類型在POSIX 中定義了檢查這些類型的宏定義<br>
      S_ISLNK （st_mode） 判斷是否為符號連接<br>
      S_ISREG （st_mode） 是否為一般文件<br>
      S_ISDIR （st_mode）是否為目錄<br>
      S_ISCHR （st_mode）是否為字符裝置文件<br>
      S_ISBLK （s3e） 是否為先進先出<br>
      S_ISSOCK （st_mode） 是否為socket<br>
      若一目錄具有sticky 位（S_ISVTX），則表示在此目錄下的文件只能被該文件所有者、此目錄所有者或root來刪除或改名。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 執行成功則返回0，失敗返回-1，錯誤代碼存於errno<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> ENOENT 參數file_name指定的文件不存在<br>
      ENOTDIR 路徑中的目錄存在但卻非真正的目錄<br>
      ELOOP 欲打開的文件有過多符號連接問題，上限為16符號連接<br>
      EFAULT 參數buf為無效指針，指向無法存在的內存空間<br>
      EACCESS 存取文件時被拒絕<br>
      ENOMEM 核心內存不足<br>
      ENAMETOOLONG 參數file_name的路徑名稱太長<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/stat.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      mian()<br>
      {<br>
      struct stat buf;<br>
      stat (“/etc/passwd”,&buf);<br>
      printf(“/etc/passwd file size = %d \n”,buf.st_size);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> /etc/passwd file size = 705<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc234></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      symlink（建立文件符號連接） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> link，unlink<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int symlink( const char * oldpath,const char 
      * newpath);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> symlink()以參數newpath指定的名稱來建立一個新的連接(符號連接)到參數oldpath所指定的已存在文件。參數oldpath指定的文件不一定要存在，如果參數newpath指定的名稱為一已存在的文件則不會建立連接。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 成功則返回0，失敗返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EPERM 參數oldpath與newpath所指的文件系統不支持符號連接<br>
      EROFS 欲測試寫入權限的文件存在於只讀文件系統內<br>
      EFAULT 參數oldpath或newpath指針超出可存取內存空間。<br>
      ENAMETOOLONG 參數oldpath或newpath太長<br>
      ENOMEM 核心內存不足<br>
      EEXIST 參數newpath所指的文件名已存在。<br>
      EMLINK 參數oldpath所指的文件已達到最大連接數目<br>
      ELOOP 參數pathname有過多符號連接問題<br>
      ENOSPC 文件系統的剩餘空間不足<br>
      EIO I/O 存取錯誤<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      symlink(“/etc/passwd”,”pass”);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc235></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      telldir（取得目錄流的讀取位置） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> open，opendir，closedir，rewinddir，seekdir，readdir，scandir<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;dirent.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> off_t telldir(DIR *dir);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> telldir()返回參數dir目錄流目前的讀取位置。此返回值代表距離目錄文件開頭的偏移量返回值返回下個讀取位置，有錯誤發生時返回-1。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EBADF參數dir為無效的目錄流。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 範例 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;dirent.h&gt;<br>
      #include&lt;unistd.h&gt;<br>
      main()<br>
      {<br>
      DIR *dir;<br>
      struct dirent *ptr;<br>
      int offset;<br>
      dir = opendir(“/etc/rc.d”);<br>
      while((ptr = readdir(dir))!=NULL)<br>
      {<br>
      offset = telldir (dir);<br>
      printf(“d_name : %s offset :%d\n”, ptr-&gt;d_name,offset);<br>
      }<br>
      closedir(dir);<br>
      }<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 執行 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> d_name : . offset :12<br>
      d_name : .. offset:24<br>
      d_name : init.d offset 40<br>
      d_name : rc0.d offset :56<br>
      d_name :rc1.d offset :72<br>
      d_name:rc2.d offset :88<br>
      d_name:rc3.d offset 104<br>
      d_name:rc4.d offset:120<br>
      d_name:rc5.d offset:136<br>
      d_name:rc6.d offset:152<br>
      d_name:rc offset 164<br>
      d_name:rc.local offset :180<br>
      d_name:rc.sysinit offset :4096<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc236></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      truncate（改變文件大小） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> open，ftruncate<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int truncate(const char * path,off_t length);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> truncate()會將參數path 指定的文件大小改為參數length 指定的大小。如果原來的文件大小比參數length大，則超過的部分會被刪去。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 執行成功則返回0，失敗返回-1，錯誤原因存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EACCESS 參數path所指定的文件無法存取。<br>
      EROFS 欲寫入的文件存在於只讀文件系統內<br>
      EFAULT 參數path指針超出可存取內存空間<br>
      EINVAL 參數path包含不合法字符<br>
      ENAMETOOLONG 參數path太長<br>
      ENOTDIR 參數path路徑並非一目錄<br>
      EISDIR 參數path 指向一目錄<br>
      ETXTBUSY 參數path所指的文件為共享程序，而且正被執行中<br>
      ELOOP 參數path’有過多符號連接問題<br>
      EIO I/O 存取錯誤。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc237></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      umask（設置建立新文件時的權限遮罩） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> creat，open<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;sys/stat.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> mode_t umask(mode_t mask);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> umask()會將系統umask值設成參數mask&0777後的值，然後將先前的umask值返回。在使用open()建立新文件時，該參數mode並非真正建立文件的權限，而是(mode&~umask)的權限值。例如，在建立文件時指定文件權限為0666，通常umask值默認為022，則該文件的真正權限則為0666&∼022＝0644，也就是rw-r--r--返回值此調用不會有錯誤值返回。返回值為原先系統的umask值。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc238></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      unlink（刪除文件） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> link，rename，remove<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;unistd.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int unlink(const char * pathname);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> unlink()會刪除參數pathname指定的文件。如果該文件名為最後連接點，但有其他進程打開了此文件，則在所有關於此文件的文件描述詞皆關閉後才會刪除。如果參數pathname為一符號連接，則此連接會被刪除。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 成功則返回0，失敗返回-1，錯誤原因存於errno<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EROFS 文件存在於只讀文件系統內<br>
      EFAULT 參數pathname指針超出可存取內存空間<br>
      ENAMETOOLONG 參數pathname太長<br>
      ENOMEM 核心內存不足<br>
      ELOOP 參數pathname 有過多符號連接問題<br>
      EIO I/O 存取錯誤<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc239></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      utime（修改文件的存取時間和更改時間） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> utimes，stat<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;utime.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int utime(const char * filename,struct utimbuf 
      * buf);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> utime()用來修改參數filename文件所屬的inode存取時間。<br>
      結構utimbuf定義如下<br>
      struct utimbuf{<br>
      time_t actime;<br>
      time_t modtime;<br>
      };<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 如果參數buf為空指針(NULL)，則該文件的存取時間和更改時間全部會設為目前時間。<br>
      執行成功則返回0，失敗返回-1，錯誤代碼存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EACCESS 存取文件時被拒絕，權限不足<br>
      ENOENT 指定的文件不存在。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
        <font face='宋體' size='2'><a name=linuxc240></a></font> </div>
    </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> <br>
        </font> </div>
    </td>
    <td> <font face='宋體' size='2'> <br>
      utimes（修改文件的存取時間和更改時間） </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 相關函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> utime，stat<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 表頭文件 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> #include&lt;sys/types.h&gt;<br>
      #include&lt;utime.h&gt;<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 定義函數 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> int utimes(char * filename.struct timeval *tvp);<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 函數說明 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> utimes()用來修改參數filename文件所屬的inode存取時間和修改時間。<br>
      結構timeval定義如下<br>
      struct timeval {<br>
      long tv_sec;<br>
      long tv_usec; /* 微妙*/<br>
      };<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 返回值 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> 參數tvp 指向兩個timeval 結構空間，和utime（）使用的utimebuf結構比較，tvp[0].tc_sec 
      則為utimbuf.actime，tvp]1].tv_sec 為utimbuf.modtime。<br>
      執行成功則返回0。失敗返回-1，錯誤代碼存於errno。<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top"> 
      <div align="right"><font face='宋體' size='2'> 錯誤代碼 </font> </div>
    </td>
    <td> <font face='宋體' size='2'> EACCESS 存取文件時被拒絕，權限不足<br>
      ENOENT 指定的文件不存在<br>
      </font> </td>
  </tr>
  <tr> 
    <td width="80" valign="top">　 
      <div align="right"><br>
      </div>
    </td>
  </tr>
</table>
</body>
</html>
